<!doctype html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>DDD实战：‎使用事件风暴和域驱动设计对反应式系统进行建模‎ | 知识铺的博客</title>
    <meta property="og:title" content="DDD实战：‎使用事件风暴和域驱动设计对反应式系统进行建模‎ - 知识铺的博客">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2022-03-20T13:22:10&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2022-03-20T13:22:10&#43;08:00'>
        
    <meta name="Keywords" content="golang,go语言,go语言笔记,知识铺,java,android,博客,项目管理,python,软件架构,公众号,小程序">
    <meta name="description" content="DDD实战：‎使用事件风暴和域驱动设计对反应式系统进行建模‎">
        <meta name="author" content="知识铺">
        
    <meta property="og:url" content="https://geek.zshipu.com/post/DDDxx/%E4%BD%BF%E7%94%A8%E4%BA%8B%E4%BB%B6%E9%A3%8E%E6%9A%B4%E5%92%8C%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1%E5%AF%B9%E5%8F%8D%E5%BA%94%E5%BC%8F%E7%B3%BB%E7%BB%9F%E8%BF%9B%E8%A1%8C%E5%BB%BA%E6%A8%A1/">
    <link rel="shortcut icon" href='/favicon.ico'  type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    <script data-ad-client="ca-pub-2874221941555456" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    
    
    
    
    
    
    
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-WLWJSST');</script>
    
</head>


<body>

<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WLWJSST"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://geek.zshipu.com/">
                        知识铺的博客
                    </a>
                
                <p class="description">专注于Android、Java、Go语言(golang)、移动互联网、项目管理、软件架构</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="https://geek.zshipu.com/">首页</a>
                    
                    <a  href="https://geek.zshipu.com/archives/" title="归档">归档</a>
                    
                    <a  href="https://geek.zshipu.com/about/" title="关于">关于</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    <style type="text/css">
    .post-toc {
        position: fixed;
        width: 200px;
        margin-left: -210px;
        padding: 5px 10px;
        font-family: Athelas, STHeiti, Microsoft Yahei, serif;
        font-size: 12px;
        border: 1px solid rgba(0, 0, 0, .07);
        border-radius: 5px;
        background-color: rgba(255, 255, 255, 0.98);
        background-clip: padding-box;
        -webkit-box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        word-wrap: break-word;
        white-space: nowrap;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        z-index: 999;
        cursor: pointer;
        max-height: 70%;
        overflow-y: auto;
        overflow-x: hidden;
    }

    .post-toc .post-toc-title {
        width: 100%;
        margin: 0 auto;
        font-size: 20px;
        font-weight: 400;
        text-transform: uppercase;
        text-align: center;
    }

    .post-toc .post-toc-content {
        font-size: 15px;
    }

    .post-toc .post-toc-content>nav>ul {
        margin: 10px 0;
    }

    .post-toc .post-toc-content ul {
        padding-left: 20px;
        list-style: square;
        margin: 0.5em;
        line-height: 1.8em;
    }

    .post-toc .post-toc-content ul ul {
        padding-left: 15px;
        display: none;
    }

    @media print,
    screen and (max-width:1057px) {
        .post-toc {
            display: none;
        }
    }
</style>
<div class="post-toc" style="position: absolute; top: 188px;">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
        <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#什么是反应式系统">‎什么是反应式系统？‎</a></li>
</ul></li>
<li><a href="#事件风暴">‎事件风暴‎</a>
<ul>
<li><a href="#工作坊">‎工作坊‎</a></li>
<li><a href="#什么是活动">‎什么是活动？‎</a></li>
<li><a href="#事件流">‎事件流‎</a></li>
<li><a href="#什么是反应">‎什么是反应？‎</a></li>
<li><a href="#什么是策略">‎什么是策略？‎</a></li>
<li><a href="#什么是命令">‎什么是命令？‎</a></li>
</ul></li>
<li><a href="#领域驱动设计">‎领域驱动设计‎</a>
<ul>
<li><a href="#什么是聚合">‎什么是聚合？‎</a></li>
<li><a href="#什么是有界上下文">‎什么是有界上下文？‎</a></li>
</ul></li>
<li><a href="#结论">‎结论‎</a></li>
</ul>
</nav>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        var postToc = $(".post-toc");
        if (postToc.length) {
            var leftPos = $("#main").offset().left;
            if(leftPos<220){
                postToc.css({"width":leftPos-10,"margin-left":(0-leftPos)})
            }

            var t = postToc.offset().top - 20,
                a = {
                    start: {
                        position: "absolute",
                        top: t
                    },
                    process: {
                        position: "fixed",
                        top: 20
                    },
                };
            $(window).scroll(function () {
                var e = $(window).scrollTop();
                e < t ? postToc.css(a.start) : postToc.css(a.process)
            })
        }
    })
</script>
    <article class="post">
        <header>
            <h1 class="post-title">DDD实战：‎使用事件风暴和域驱动设计对反应式系统进行建模‎</h1>
        </header>
        <date class="post-meta meta-date">
            2022年3月20日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            

<p>一个成功的事件风暴会议——以及一个成功的软件项目——需要同等的艺术、知识和技术技能。此外，对便笺进行更改比对生产代码进行更改要便宜得多。通过编写代码来了解您的系统是理解和完善所涉及的业务流程的一种非常昂贵的方法。‎</p>

<p>‎本文中的任何内容都不需要技术专业知识或以前使用反应式事件驱动系统的经验。无论您是业务专家、开发人员、架构师、产品所有者还是企业主，您都应该学习一些新技术，这些技术将帮助您与团队和组织协作获得更多成功和乐趣。‎</p>

<h2 id="什么是反应式系统">‎什么是反应式系统？‎</h2>

<p>‎在反应式系统中，可以实时‎*‎响应‎*‎组织内发生的‎*‎有趣业务‎**‎事件‎*‎，而无需集中控制和整体系统架构的协调成本。您的软件系统更准确地反映了业务的真实本质。‎</p>

<p>‎虽然‎*‎&rdquo;反应式&rdquo;‎*‎在经典上被认为是一个负面术语，但在计算机系统中，它是理想的控制流。系统不需要显式更改系统的每个部分来使新事物发生，而是在事件发生时‎*‎对事件做出反应‎*‎。想象一下，您是否能够订阅组织内任何有趣的事件并创建新系统来对这些事件做出反应，而无需与任何其他团队协调？这就是我们的目标。‎</p>

<p><img src="https://cdn.jsdelivr.net/gh/zshipu/images/1aGNMfb32uaj2nFRdDPCLNw.png" alt="img" /></p>

<p>‎发货系统订阅 Order 事件并做出相应的反应。新系统还可以订阅订单，而无需向订单团队请求更改。‎</p>

<p>‎例如，如果配送系统需要来自订单系统的信息，则配送团队无需请求‎‎订单团队进行更改，他们只需订阅订单系统发出的相关事件即可。如果默认情况下发布有趣的事件，则团队需要直接相互协调以根据业务需求进行重要更改的情况很少见。‎</p>

<p>‎这是可能的，因为在事件驱动的系统中，域事件‎*‎被发布到期刊上‎*‎。组织中有权访问日记的任何其他系统都可以订阅已发布的事件并实时响应这些事件。关于这种方法最有趣的事情是它的简单性;几个世纪以来，企业一直在通过期刊运营。我们只是将这种方法带入现代语境。‎</p>

<p><img src="https://cdn.jsdelivr.net/gh/zshipu/images/1XbbRO5jimyg4VttOmtbWQA.png" alt="img" /></p>

<p>‎存款等事件可能会引发反应，例如更新您的可用余额。‎</p>

<p>‎这种程度的灵活性之所以成为可能，是因为多年来技术基础设施有了很大的改进，例如网络的速度和可靠性。十年前，我们无法证明通过网络发出事件所涉及的延迟损失是合理的，因此我们优先考虑了‎*‎局部性‎*‎并构建了可以在单台计算机上运行的整体式应用程序。‎</p>

<p>‎现在，整体式系统的规模和复杂性已经增长，以至于许多团队在单个应用程序上的协调成本太大，不容忽视。基础设施的改进意味着分销费用迅速下降，因此现在复杂的企业系统正在被重新视为事件驱动系统。这对开发人员和领域专家如何看待系统设计产生了巨大影响。‎</p>

<p><img src="https://cdn.jsdelivr.net/gh/zshipu/images/1fYWM_GGOQBB9hzypglBlrA.png" alt="img" /></p>

<p>‎整体式架构迫使团队产生巨大的协调成本。分布式架构允许团队以更大的自主性和灵活性工作。‎</p>

<p>‎组织现在拥有完成看似不可能的工具，例如将隔夜批处理流程转换为实时系统，将夜间生成的静态报告转换为近乎实时地显示全局各个方面的任务控制仪表板，等等。想象一下，制定策略，自动响应业务中的重要事件？它正在改变游戏规则。‎</p>

<p>‎现在我们所需要的只是一种现代技术来帮助我们对这样的系统进行建模。‎</p>

<h1 id="事件风暴">‎事件风暴‎</h1>

<p>‎事件风暴是组织人类学的一种形式;它就是讨论‎‎组织中的事件‎*‎流‎*‎，并以易于理解的方式对事件的流动进行建模‎‎。从事件风暴会议中获得的知识最终将融入到其他建模技术中，为出现的业务流程提供结构，但真正的价值在于所涉及的对话。您可以从模型构建软件系统，或者只是使用从对话中获得的知识来更好地理解和优化业务流程本身。‎</p>

<h2 id="工作坊">‎工作坊‎</h2>

<p>‎举办活动风暴研讨会很简单：一个系统的利益相关者进入一个房间，里面有无限的建模表面——一张贴在墙上的巨纸——并在上面贴上便签。听起来很简单？是的。这就是事件风暴的乐趣;它纯粹专注于手头的任务，即理解您的业务流程，而没有阻碍对话的所有过于复杂的建模技术。‎</p>

<p><img src="https://cdn.jsdelivr.net/gh/zshipu/images/1yds22LD6emggEvb9Sq-8pg.png" alt="img" /></p>

<p>‎没那么快。我们需要遵循一套指导方针，这样我们就不会陷入混乱。事件风暴的价值在于沟通，而不仅仅是在墙上贴上便笺。‎</p>

<p>‎现在，我们将介绍在讨论和建模事件驱动型业务流程（‎*‎事件、反应和命令‎*‎）时涉及的核心概念。‎</p>

<h2 id="什么是活动">‎什么是活动？‎</h2>

<p>‎首先，我们将开始纯粹根据‎*‎事件‎*‎和反应来考虑我们的业务流程‎*‎，‎*‎这是一种说&rdquo;因果关系&rdquo;的花哨方式。‎</p>

<blockquote>
<p>‎事情发生了。并非所有这些都很有趣，有些可能值得记录，但不会引起反应。最有趣的会引起反应。许多系统需要对有趣的事件做出反应。通常，您需要知道为什么系统会以这种方式做出反应。‎</p>

<p>‎—— Martin Fowler，‎<a href="https://martinfowler.com/eaaDev/DomainEvent.html">‎《Domain Event》‎</a></p>
</blockquote>

<p>‎我们可以将马丁的名言重述如下：‎</p>

<blockquote>
<p>‎&rdquo;重要事件会引起系统其他地方的反应，了解这些反应发生的原因通常很重要&rdquo;。‎</p>
</blockquote>

<p>‎我们可以将这个单一语句作为我们的指导原则，并用它来建模、构建和构建事件驱动的系统。‎</p>

<h2 id="事件流">‎事件流‎</h2>

<p>‎单个事件不是很令人兴奋，因此我们需要从流程的角度来考虑事件 - 随时间变化的事件‎*‎。 ‎*‎橙色粘滞表示事件。为了对业务流程进行建模，我们只需按时间顺序从左到右排列事件。就是这样！听起来很简单？是的。这就是重点。你和你的团队之间没有不必要的仪式，有趣的讨论会产生结果。‎</p>

<p><img src="https://cdn.jsdelivr.net/gh/zshipu/images/1oXCtjqX6jQGiyjumJJsSMw.png" alt="img" /></p>

<p>‎一旦我们有了随时间变化的线性事件序列，我们就需要考虑这些事件‎*‎的原因‎*‎。‎</p>

<h2 id="什么是反应">‎什么是反应？‎</h2>

<p>*‎反应‎*‎是在其他事情发生后需要发生的事情。反应最好在以下陈述中捕获，‎</p>

<blockquote>
<p>‎&rdquo;‎<strong>‎每当发生这种情况时，就会‎</strong>‎发生这种情况&rdquo;。‎</p>
</blockquote>

<p>*‎这就是‎*‎反应。‎*‎这就是‎*‎事件。‎*‎&rdquo;何时‎*‎&rdquo;是将事件与创建‎*‎策略‎*‎的反应相关联的单词。‎</p>

<p>‎如果你发现自己在描述一系列事件‎*‎时都‎*‎使用这个术语，那么你就是在用事件驱动的系统来说话。这些语句的顺序不如语句的内容重要。‎</p>

<blockquote>
<p>‎&rdquo;每当创建新的‎<strong>‎用户帐户时‎</strong>‎，我们都会‎<strong>‎通过电子邮件向她发送确认‎</strong>‎&rdquo;。‎</p>
</blockquote>

<p>‎如果你读了上面的陈述，关键是时态。事件总是过去时态，而反应总是未来时态。更重要的是，‎*‎我们从不讨论&rdquo;现在&rdquo;——‎*‎我们不能对系统的当前状态做出任何假设，因为不能保证我们打算发生的事情真的会发生。错误的假设是计算机系统中大多数故障的根本原因。通过只对因果关系进行建模，我们可以更好地决定如何对‎*‎任何事情做出反应，‎*‎因为我们不会对结果做出错误的假设——不仅是成功的结果，还有错误和其他不太理想的事件。‎</p>

<h2 id="什么是策略">‎什么是策略？‎</h2>

<p>‎事件和反应一起的流称为‎*‎策略 — ‎*‎我们将此流称为策略，因为该流捕获了核心业务规则，例如‎*‎&rdquo;每当有人登录客户帐户时，我们需要提醒客户&rdquo;‎*‎。‎</p>

<p><img src="https://cdn.jsdelivr.net/gh/zshipu/images/1rT9PP9k1eGtb7bSdocQTxQ.png" alt="img" /></p>

<p>‎单个事件可能会导致多种反应。考虑当事情出错时会发生什么也很重要。可以将整个流程视为&rdquo;帐户创建策略&rdquo;。‎</p>

<p>‎同样重要的是要注意，一个反应——或整个政策——不需要代表一个软件。例如，&rdquo;‎*‎确认付款详细信息&rdquo;‎*‎可能是一个手动过程，涉及管理员手动验证电汇详细信息。整个策略甚至可以作为手动流程规则实现，例如团队相互打电话而不是自动计算机系统。事件风暴是一种非常有价值的技术，可以了解组织中的手动流程以及设计新软件。‎</p>

<p>‎我们还看到，反应往往引起‎*‎新的事件，‎*‎例如反应的&rdquo;扇出&rdquo;;扇出是指两个或多个‎*‎效应‎*‎从‎*‎导致‎*‎这些效应的另一侧出现。事件驱动的系统都是关于因果关系的，因此捕获尽可能多的结果非常重要。以这种方式导致扇出的事件可能值得深入研究，甚至可能值得自己的事件风暴会议。‎</p>

<p>‎关注政策的另一个原因是讨论和设计流程的重要性，以便在‎*‎出现问题时进行讨论‎*‎和设计;例如，如果付款详细信息‎*‎未‎*‎成功确认，会发生什么情况？‎</p>

<p>‎现在我们知道事件可以引起多种反应，而这些反应可以引起新的事件。还有什么可能导致事件？‎</p>

<ul>
<li>‎外部系统（粉红色粘滞剂）‎</li>
<li>‎命令（蓝色粘滞）‎</li>
<li>‎用户发起的命令（用人注释的蓝色便笺）‎</li>
</ul>

<p><img src="https://cdn.jsdelivr.net/gh/zshipu/images/1ZRUwqdg0Acm1bqVfxeyrzw.png" alt="img" /></p>

<p>‎捕获用户输入、基于用户输入发出事件、处理付款以及与外部支付网关交互的业务流程。‎</p>

<p>‎在上面的流程中，我们只用了几个便利贴就捕捉到了很多细节。我们知道，用户可以输入信用卡详细信息，提交信用卡时会生成事件，并且支付处理器与外部支付系统进行交互。‎</p>

<p>‎一个专注于此业务流程的简单研讨会可能会产生更多的讨论，例如：‎</p>

<ul>
<li>‎我们需要从用户那里捕获什么类型的信息？‎</li>
<li>‎我们在信用卡活动中包含哪些类型的信息？‎</li>
<li>‎支付处理器的细节是什么，它如何与外部系统交互？‎</li>
</ul>

<p>‎我们还可以在流程中使用其他一些有趣的元素：‎</p>

<ul>
<li>‎计时器（带时钟的橙色贴纸）‎</li>
<li>‎计划程序（带有日历的橙色便笺）‎</li>
</ul>

<p><img src="https://cdn.jsdelivr.net/gh/zshipu/images/1b6Fzf3ZsRh3m0pTaE55JaA.png" alt="img" /></p>

<p>‎事件也可以安排和计时。讨论业务流程的所有规则非常重要，而不仅仅是用户交互。‎</p>

<p>‎计划程序和计时器也是非常有趣的事件类型，但它们通常是‎*‎实现级别的考虑因素‎*‎。在以业务为中心的会议期间，我们不需要深入研究这种详细程度。最终，开发人员将需要更高的设计精度，并将考虑实现的各个方面，包括需要安排的事件。‎</p>

<h2 id="什么是命令">‎什么是命令？‎</h2>

<p>‎最终，我们需要更深入地研究并准确绘制出用户如何与我们的系统进行交互;‎*‎命令‎*‎至关重要，因为它们通常表示用户交互。将用户交互添加到事件流中，使我们能够对系统的完整因果关系进行建模。‎</p>

<p><img src="https://cdn.jsdelivr.net/gh/zshipu/images/1WDWNvuwKI7S1KQUmgNk1vg.png" alt="img" /></p>

<p>‎在上面的示例中，我们可以可视化用户提交的信用申请，并最终导致批准或拒绝决定。随着我们继续对此业务流程进行建模，我们最终将采用更详细的元素来帮助捕获：‎</p>

<ul>
<li>‎用户界面要求‎</li>
<li>‎数据模型‎</li>
<li>‎等‎</li>
</ul>

<p>‎敏锐的观察者也会注意到，命令与反应非常相似。命令和反应之间的唯一区别是，命令通常由用户发起，而反应通常由事件发起。从一开始就就如何讨论命令和反应的细微差别达成一致会对您的团队很有帮助 - 例如，一些团队纯粹使用反应‎‎来记录更复杂的过程，并将命令用于系统和用户操作。定制您的团队使用各种事件风暴元素的方式来满足您自己的需求是完全可以接受的，只要您的团队制作了每个人都遵循的‎*‎传奇‎*‎。‎</p>

<p>‎对于高级事件风暴，‎*‎命令、事件和反应‎*‎为我们提供了足够的构建块来讨论系统的核心。我们最终将希望更深入地了解实现领域。一旦我们到达那里，我们将需要一些元素来帮助我们建模和定义系统‎*‎的结构‎*‎。‎</p>

<p>‎在事件驱动系统中定义结构的最有效方法是使用‎*‎领域驱动设计技术‎*‎。‎</p>

<p>‎接下来，我们将介绍域驱动设计的基础知识，以及一些关键的构建块如何帮助我们在流程周围放置结构。‎</p>

<h1 id="领域驱动设计">‎领域驱动设计‎</h1>

<p>‎事件风暴会话可用于对业务流程进行建模，而域驱动设计则提供了将这些流转换为结构化系统的纪律。当我们提到‎*‎系统‎*‎时，我们并不自动意味着代码，我们只是意味着最纯粹意义上的&rdquo;系统&rdquo;，无论该系统是手动的还是自动的。‎</p>

<blockquote>
<p>‎在所有软件开发方法中，领域驱动设计是唯一一种专注于语言作为深入了解给定领域复杂性的关键工具的方法。‎</p>

<p>‎— Alberto Brandolini， ‎<a href="http://eventstorming.com/">‎Event Storming‎</a></p>
</blockquote>

<p>‎在高层次上，领域驱动设计通过识别组织内的自然边界并确定跨这些边界所需的合作，围绕事件提供结构。‎</p>

<p>‎想象一下，在该场景中，您尝试对跨大型公司中跨团队甚至部门的业务流程进行建模的常见场景&hellip;‎</p>

<p><img src="https://cdn.jsdelivr.net/gh/zshipu/images/1jIrAILQz5xL-E5-OkZA6XQ.png" alt="img" /></p>

<p>‎业务流程经常跨越组织边界。域驱动设计为相应地构建系统提供了指南。‎</p>

<p>‎团队要就跨越组织边界的流程达成一致，需要付出巨大的协调成本。当一个‎*‎系统必须由多个团队维护时，‎*‎这更加痛苦。这种类型的阻抗是我们必须不惜一切代价避免的。领域驱动设计为我们提供了一些工具，可以帮助我们避免这种情况，尽管没有建模技术是万无一失的。‎</p>

<p>‎为了将结构融入到流程中，我们将重点介绍 DDD 的两个核心元素 — ‎*‎聚合‎*‎和‎*‎有界上下文‎*‎。‎</p>

<h2 id="什么是聚合">‎什么是聚合？‎</h2>

<p>*‎聚合在‎*‎逻辑上将各种命令、事件和反应组合在一起。这有助于我们以完全尊重业务流程中关系的方式制作软件。‎</p>

<p>‎当我们达到这种详细程度时，我们可以开始从更具体的角度思考‎*‎聚合事件‎*‎和‎<em>‎域事件。‎</em></p>

<p><img src="https://cdn.jsdelivr.net/gh/zshipu/images/1Y_1BmGsEFdlIwZbHPNkYcA.png" alt="img" /></p>

<p>‎一个帐户聚合，该聚合以逻辑方式对与帐户相关的命令和事件进行分组。‎</p>

<p>*‎聚合事件‎*‎在聚合本身的边界内相关，而‎*‎域事件‎*‎与更广泛的系统相关。有许多事件是如此具体，以至于将它们泄漏到更广泛的组织中会导致太多的混乱，因此聚合边界本质上传达了‎*‎&rdquo;这些事件仅在聚合的边界内是有趣的 - 在此边界之外发出的任何事件都应该对域感兴趣&rdquo;‎*‎。‎</p>

<p>‎在更深入地了解解决方案领域之前，我们不需要创建聚合。一旦我们开始从聚合的角度来思考，我们实际上是在考虑实现——但还有另一个原因可以尽早开始考虑聚合。‎</p>

<p>‎人类的大脑只能在学习能力耗尽之前保留如此多的复杂性。遗留系统最有害的方面之一是在系统内生产之前所需的知识的无限性。‎</p>

<blockquote>
<p><em>‎如果我在运输模块中更改一行代码会发生什么;它会中断付款吗？‎</em></p>
</blockquote>

<p>‎聚合通过彼此隔离相关关注点来为我们的设计带来结构。‎</p>

<blockquote>
<p>‎聚合边界内的所有功能都应易于一个人理解，包括该边界内更改的影响。‎</p>
</blockquote>

<p>‎在专注于业务流程的高级建模会议期间，利用聚合并不重要，但是如果您发现自己在考虑解决方案方面，则聚合为有意义的实现讨论提供了必要的结构。‎</p>

<h2 id="什么是有界上下文">‎什么是有界上下文？‎</h2>

<p>‎有界上下文用于在大型复杂系统中创建‎*‎隔板‎*‎。就像船体中的舱壁可以防止突破物沉没整个船一样，系统中的隔板可以防止不必要的复杂性泄漏到上下文边界之外。‎</p>

<p><img src="https://cdn.jsdelivr.net/gh/zshipu/images/1zfZayosLl8oSYOAtY-NYcQ.png" alt="img" /></p>

<p>‎付款团队负责发出付款事件。发货团队只需订阅这些事件，并实现自己的发货逻辑。‎</p>

<p>*‎聚合边界将‎*‎相关行为组合在一起，而‎*‎有边界上下文则将‎*‎相关的语言、意义和文化分组。例如，&rdquo;发货&rdquo;上下文中的&rdquo;确认&rdquo;可能与付款上下文中的&rdquo;确认&rdquo;含义完全不同。有界上下文有助于避免像&rdquo;ShippingConfirmation&rdquo;这样的可怕怪物逃离笼子并在整个组织中造成严重破坏。‎</p>

<p>‎通过定义有界上下文，我们可以开始了解系统的子域如何交互，而无需深入研究代码的内脏。Shipping系统可能是一个遗留的J2EE应用程序，支付系统可能是一个内置于Akka中的现代系统，但它们纯粹在事件中相互交谈。‎</p>

<h1 id="结论">‎结论‎</h1>

<p>‎事件风暴是一种协作练习，它不分职称或层次结构，只有想法才是重要的 - 但是，在现实世界中，决策者需要通过行动来推动练习。这些‎*‎模型‎*‎是对话的副产品‎*‎，‎*‎而这些对话才是真正的价值所在。沟通的增加将在整个组织中产生连锁反应。模型可以用作软件开发的可操作蓝图，但它们也可以简单地用作增强通信流的工具。当蓝图用于构建软件时，结果是反映业务语言和结构的代码。然后，跨职能团队能够使用与业务相同的语言和模型来讨论和推理代码，从而确保未来的协作是有效和准确的。‎</p>

        </div>

        
<div class="post-archive">
    <ul class="post-copyright">
        <li><strong>原文作者：</strong><a rel="author" href="https://geek.zshipu.com/">知识铺</a></li>
        <li style="word-break:break-all"><strong>原文链接：</strong><a href="https://geek.zshipu.com/post/DDDxx/%E4%BD%BF%E7%94%A8%E4%BA%8B%E4%BB%B6%E9%A3%8E%E6%9A%B4%E5%92%8C%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1%E5%AF%B9%E5%8F%8D%E5%BA%94%E5%BC%8F%E7%B3%BB%E7%BB%9F%E8%BF%9B%E8%A1%8C%E5%BB%BA%E6%A8%A1/">https://geek.zshipu.com/post/DDDxx/%E4%BD%BF%E7%94%A8%E4%BA%8B%E4%BB%B6%E9%A3%8E%E6%9A%B4%E5%92%8C%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1%E5%AF%B9%E5%8F%8D%E5%BA%94%E5%BC%8F%E7%B3%BB%E7%BB%9F%E8%BF%9B%E8%A1%8C%E5%BB%BA%E6%A8%A1/</a></li>
        <li><strong>版权声明：</strong>本作品采用<a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a>进行许可，非商业转载请注明出处（作者，原文链接），商业转载请联系作者获得授权。</li>
        <li><strong>免责声明：</strong>本页面内容均来源于站内编辑发布，部分信息来源互联网，并不意味着本站赞同其观点或者证实其内容的真实性，如涉及版权等问题，请立即联系客服进行更改或删除，保证您的合法权益。转载请注明来源，欢迎对文章中的引用来源进行考证，欢迎指出任何有错误或不够清晰的表达。也可以邮件至 sblig@126.com</li>
    </ul>
</div>
<br/>



        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/post/DDDxx/DDD%E5%AE%9E%E6%88%9815-%E8%BE%B9%E7%95%8C%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%9A%84%E5%90%84%E7%A7%8D%E8%BE%B9%E7%95%8C%E5%9C%A8%E6%9E%B6%E6%9E%84%E6%BC%94%E8%BF%9B%E4%B8%AD%E7%9A%84%E4%BD%9C%E7%94%A8/">DDD实战：15 边界：微服务的各种边界在架构演进中的作用</a></li>
        
        <li><a href="/post/DDDxx/DDD%E5%AE%9E%E6%88%9814-%E4%BB%A3%E7%A0%81%E6%A8%A1%E5%9E%8B%E4%B8%8B%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E9%A2%86%E5%9F%9F%E6%A8%A1%E5%9E%8B%E4%B8%8E%E4%BB%A3%E7%A0%81%E6%A8%A1%E5%9E%8B%E7%9A%84%E4%B8%80%E8%87%B4%E6%80%A7/">DDD实战：14 代码模型（下）：如何保证领域模型与代码模型的一致性</a></li>
        
        <li><a href="/post/DDDxx/DDD%E5%AE%9E%E6%88%9813-%E4%BB%A3%E7%A0%81%E6%A8%A1%E5%9E%8B%E4%B8%8A%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8DDD%E8%AE%BE%E8%AE%A1%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%BB%A3%E7%A0%81%E6%A8%A1%E5%9E%8B/">DDD实战：13 代码模型（上）：如何使用DDD设计微服务代码模型</a></li>
        
        <li><a href="/post/DDDxx/DDD%E5%AE%9E%E6%88%9812-%E9%A2%86%E5%9F%9F%E5%BB%BA%E6%A8%A1%E5%A6%82%E4%BD%95%E7%94%A8%E4%BA%8B%E4%BB%B6%E9%A3%8E%E6%9A%B4%E6%9E%84%E5%BB%BA%E9%A2%86%E5%9F%9F%E6%A8%A1%E5%9E%8B/">DDD实战：12 领域建模：如何用事件风暴构建领域模型</a></li>
        
        <li><a href="/post/DDDxx/DDD%E5%AE%9E%E6%88%9810-DDD%E4%B8%AD%E5%8F%B0%E5%92%8C%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%AE%83%E4%BB%AC%E6%98%AF%E5%A6%82%E4%BD%95%E5%8D%8F%E4%BD%9C%E7%9A%84/">DDD实战：10 DDD、中台和微服务：它们是如何协作的</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='/tags/DDD'>DDD</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "zshipu/zshipu-geek"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
      </script>
    </div>
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2022 <a href="https://geek.zshipu.com/">知识铺的博客 By 知识铺</a>
        
        | <a rel="nofollow" target="_blank" href="https://beian.miit.gov.cn/">浙 ICP 备19032823号-1</a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://geek.zshipu.com/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://geek.zshipu.com/">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://geek.zshipu.com/post/nextjs/%E5%A6%82%E4%BD%95%E4%B8%BA%E6%82%A8%E7%9A%84Next.js%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E5%8F%AF%E6%89%A9%E5%B1%95%E7%9A%84%E6%9E%B6%E6%9E%84/" title="起步：如何为您的Next.js项目构建可扩展的架构">起步：如何为您的Next.js项目构建可扩展的架构</a>
    </li>
    
    <li>
        <a href="https://geek.zshipu.com/post/DDDxx/DDD%E5%AE%9E%E6%88%9820-%E6%80%BB%E7%BB%93%E4%BA%8C%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84%E5%85%B3%E9%94%AE%E8%AE%BE%E8%AE%A110%E9%97%AE/" title="DDD实战：20 总结（二）：分布式架构关键设计10问">DDD实战：20 总结（二）：分布式架构关键设计10问</a>
    </li>
    
    <li>
        <a href="https://geek.zshipu.com/post/DDDxx/DDD%E5%AE%9E%E6%88%9819-%E6%80%BB%E7%BB%93%E4%B8%80%E5%BE%AE%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1%E5%92%8C%E6%8B%86%E5%88%86%E8%A6%81%E5%9D%9A%E6%8C%81%E5%93%AA%E4%BA%9B%E5%8E%9F%E5%88%99/" title="DDD实战：19 总结（一）：微服务设计和拆分要坚持哪些原则">DDD实战：19 总结（一）：微服务设计和拆分要坚持哪些原则</a>
    </li>
    
    <li>
        <a href="https://geek.zshipu.com/post/DDDxx/DDD%E5%AE%9E%E6%88%9818-%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%B2%E8%AE%B2%E5%9F%BA%E4%BA%8EDDD%E7%9A%84%E5%BE%AE%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1%E5%AE%9E%E4%BE%8B/" title="DDD实战：18 知识点串讲：基于DDD的微服务设计实例">DDD实战：18 知识点串讲：基于DDD的微服务设计实例</a>
    </li>
    
    <li>
        <a href="https://geek.zshipu.com/post/DDDxx/DDD%E5%AE%9E%E6%88%9817-%E4%BB%8E%E5%90%8E%E7%AB%AF%E5%88%B0%E5%89%8D%E7%AB%AF%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%90%8E%E5%89%8D%E7%AB%AF%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1/" title="DDD实战：17 从后端到前端：微服务后，前端如何设计">DDD实战：17 从后端到前端：微服务后，前端如何设计</a>
    </li>
    
    <li>
        <a href="https://geek.zshipu.com/post/DDDxx/DDD%E5%AE%9E%E6%88%9816-%E8%A7%86%E5%9B%BE%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%9C%8D%E5%8A%A1%E5%92%8C%E6%95%B0%E6%8D%AE%E5%9C%A8%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%90%84%E5%B1%82%E7%9A%84%E5%8D%8F%E4%BD%9C/" title="DDD实战：16 视图：如何实现服务和数据在微服务各层的协作">DDD实战：16 视图：如何实现服务和数据在微服务各层的协作</a>
    </li>
    
    <li>
        <a href="https://geek.zshipu.com/post/DDDxx/DDD%E5%AE%9E%E6%88%9815-%E8%BE%B9%E7%95%8C%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%9A%84%E5%90%84%E7%A7%8D%E8%BE%B9%E7%95%8C%E5%9C%A8%E6%9E%B6%E6%9E%84%E6%BC%94%E8%BF%9B%E4%B8%AD%E7%9A%84%E4%BD%9C%E7%94%A8/" title="DDD实战：15 边界：微服务的各种边界在架构演进中的作用">DDD实战：15 边界：微服务的各种边界在架构演进中的作用</a>
    </li>
    
    <li>
        <a href="https://geek.zshipu.com/post/DDDxx/%E4%BD%BF%E7%94%A8%E4%BA%8B%E4%BB%B6%E9%A3%8E%E6%9A%B4%E5%92%8C%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1%E5%AF%B9%E5%8F%8D%E5%BA%94%E5%BC%8F%E7%B3%BB%E7%BB%9F%E8%BF%9B%E8%A1%8C%E5%BB%BA%E6%A8%A1/" title="DDD实战：‎使用事件风暴和域驱动设计对反应式系统进行建模‎">DDD实战：‎使用事件风暴和域驱动设计对反应式系统进行建模‎</a>
    </li>
    
    <li>
        <a href="https://geek.zshipu.com/post/DDDxx/DDD%E5%AE%9E%E6%88%9814-%E4%BB%A3%E7%A0%81%E6%A8%A1%E5%9E%8B%E4%B8%8B%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E9%A2%86%E5%9F%9F%E6%A8%A1%E5%9E%8B%E4%B8%8E%E4%BB%A3%E7%A0%81%E6%A8%A1%E5%9E%8B%E7%9A%84%E4%B8%80%E8%87%B4%E6%80%A7/" title="DDD实战：14 代码模型（下）：如何保证领域模型与代码模型的一致性">DDD实战：14 代码模型（下）：如何保证领域模型与代码模型的一致性</a>
    </li>
    
    <li>
        <a href="https://geek.zshipu.com/post/DDDxx/DDD%E5%AE%9E%E6%88%9813-%E4%BB%A3%E7%A0%81%E6%A8%A1%E5%9E%8B%E4%B8%8A%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8DDD%E8%AE%BE%E8%AE%A1%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%BB%A3%E7%A0%81%E6%A8%A1%E5%9E%8B/" title="DDD实战：13 代码模型（上）：如何使用DDD设计微服务代码模型">DDD实战：13 代码模型（上）：如何使用DDD设计微服务代码模型</a>
    </li>
    
</ul>
    </section>

    
<section class="widget">
    <h3 class="widget-title" style="color:red">福利派送</h3>
    <ul class="widget-list">
        
        <li>
            <a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?source=5176.11533457&amp;userCode=tzm8r4hc" title="【2019双12】ALL IN CLoud 低至1折" target="_blank" style="color:red">
                
                    <img src="https://img.alicdn.com/tfs/TB1_rYHo7P2gK0jSZPxXXacQpXa-690-388.jpg">
                
            </a>
        </li>
        
        <li>
            <a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?source=5176.11533457&amp;userCode=tzm8r4hc" title="助力产业智慧升级，云服务器首年88元起，更有千元代金券礼包免费领！" target="_blank" style="color:red">
                
                    <img src="https://upload-dianshi-1255598498.file.myqcloud.com/345-7c71532bd4935fbdd9a67c1a71e577b1767b805c.200%E7%89%88%E6%9C%ACB.jpg">
                
            </a>
        </li>
        
        <li>
            <a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?source=5176.11533457&amp;userCode=tzm8r4hc" title="【渠道专享低折扣】11月特惠 限时2折" target="_blank" style="color:red">
                
                    <img src="https://img.alicdn.com/tfs/TB1hblJl7Y2gK0jSZFgXXc5OFXa-750-400.jpg">
                
            </a>
        </li>
        
    </ul>
</section>


    <section class="widget">
        <h3 class="widget-title"><a href='/categories/'>分类</a></h3>
<ul class="widget-list">
    
    <li><a href="https://geek.zshipu.com/categories/flutter/">flutter (30)</a></li>
    
    <li><a href="https://geek.zshipu.com/categories/iOS/">iOS (7)</a></li>
    
    <li><a href="https://geek.zshipu.com/categories/unix/">unix (9)</a></li>
    
    <li><a href="https://geek.zshipu.com/categories/%E7%AE%97%E6%B3%95/">算法 (3)</a></li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href='/tags/'>标签</a></h3>
<div class="tagcloud">
    
    <a href="https://geek.zshipu.com/tags/BI/">BI</a>
    
    <a href="https://geek.zshipu.com/tags/DDD/">DDD</a>
    
    <a href="https://geek.zshipu.com/tags/DDD%E5%AE%9E%E6%88%98/">DDD实战</a>
    
    <a href="https://geek.zshipu.com/tags/DevOps/">DevOps</a>
    
    <a href="">JS</a>
    
    <a href="https://geek.zshipu.com/tags/Java/">Java</a>
    
    <a href="https://geek.zshipu.com/tags/JavaScript/">JavaScript</a>
    
    <a href="https://geek.zshipu.com/tags/Monorepo/">Monorepo</a>
    
    <a href="https://geek.zshipu.com/tags/NextJS/">NextJS</a>
    
    <a href="">Nextjs</a>
    
    <a href="https://geek.zshipu.com/tags/Typora/">Typora</a>
    
    <a href="https://geek.zshipu.com/tags/WebRTC/">WebRTC</a>
    
    <a href="https://geek.zshipu.com/tags/android/">android</a>
    
    <a href="https://geek.zshipu.com/tags/css/">css</a>
    
    <a href="https://geek.zshipu.com/tags/game/">game</a>
    
    <a href="https://geek.zshipu.com/tags/go/">go</a>
    
    <a href="https://geek.zshipu.com/tags/golang/">golang</a>
    
    <a href="">java</a>
    
    <a href="https://geek.zshipu.com/tags/js/">js</a>
    
    <a href="https://geek.zshipu.com/tags/mysql/">mysql</a>
    
    <a href="https://geek.zshipu.com/tags/nifi/">nifi</a>
    
    <a href="https://geek.zshipu.com/tags/npm/">npm</a>
    
    <a href="https://geek.zshipu.com/tags/python/">python</a>
    
    <a href="https://geek.zshipu.com/tags/reactjs/">reactjs</a>
    
    <a href="https://geek.zshipu.com/tags/sqllit/">sqllit</a>
    
    <a href="https://geek.zshipu.com/tags/vuejs/">vuejs</a>
    
    <a href="https://geek.zshipu.com/tags/web3/">web3</a>
    
    <a href="https://geek.zshipu.com/tags/%E4%B9%A6%E7%B1%8D/">书籍</a>
    
    <a href="https://geek.zshipu.com/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/">人工智能</a>
    
    <a href="https://geek.zshipu.com/tags/%E5%88%86%E8%AF%8D/">分词</a>
    
    <a href="https://geek.zshipu.com/tags/%E6%96%87%E6%91%98/">文摘</a>
    
    <a href="https://geek.zshipu.com/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a>
    
    <a href="https://geek.zshipu.com/tags/%E6%9E%B6%E6%9E%84/">架构</a>
    
    <a href="https://geek.zshipu.com/tags/%E7%88%AC%E8%99%AB/">爬虫</a>
    
    <a href="https://geek.zshipu.com/tags/%E7%BA%BF%E7%A8%8B/">线程</a>
    
    <a href="https://geek.zshipu.com/tags/%E8%B5%B7%E6%AD%A5/">起步</a>
    
</div>
    </section>

    
<section class="widget">
    <h3 class="widget-title">友情链接</h3>
    <ul class="widget-list">
        
        <li>
            <a target="_blank" href="https://blog.zshipu.com//" title="知识铺的博客">知识铺的博客</a>
        </li>
        
    </ul>
</section>


    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://geek.zshipu.com/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>