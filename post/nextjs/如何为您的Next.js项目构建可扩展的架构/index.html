<!doctype html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>起步：如何为您的Next.js项目构建可扩展的架构 | 知识铺的博客</title>
    <meta property="og:title" content="起步：如何为您的Next.js项目构建可扩展的架构 - 知识铺的博客">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2022-03-22T18:22:10&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2022-03-22T18:22:10&#43;08:00'>
        
    <meta name="Keywords" content="golang,go语言,go语言笔记,知识铺,java,android,博客,项目管理,python,软件架构,公众号,小程序">
    <meta name="description" content="起步：如何为您的Next.js项目构建可扩展的架构">
        <meta name="author" content="知识铺">
        
    <meta property="og:url" content="https://geek.zshipu.com/post/nextjs/%E5%A6%82%E4%BD%95%E4%B8%BA%E6%82%A8%E7%9A%84Next.js%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E5%8F%AF%E6%89%A9%E5%B1%95%E7%9A%84%E6%9E%B6%E6%9E%84/">
    <link rel="shortcut icon" href='/favicon.ico'  type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    <script data-ad-client="ca-pub-2874221941555456" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    
    
    
    
    
    
    
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-WLWJSST');</script>
    
</head>


<body>

<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WLWJSST"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://geek.zshipu.com/">
                        知识铺的博客
                    </a>
                
                <p class="description">专注于Android、Java、Go语言(golang)、移动互联网、项目管理、软件架构</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="https://geek.zshipu.com/">首页</a>
                    
                    <a  href="https://geek.zshipu.com/archives/" title="归档">归档</a>
                    
                    <a  href="https://geek.zshipu.com/about/" title="关于">关于</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    <style type="text/css">
    .post-toc {
        position: fixed;
        width: 200px;
        margin-left: -210px;
        padding: 5px 10px;
        font-family: Athelas, STHeiti, Microsoft Yahei, serif;
        font-size: 12px;
        border: 1px solid rgba(0, 0, 0, .07);
        border-radius: 5px;
        background-color: rgba(255, 255, 255, 0.98);
        background-clip: padding-box;
        -webkit-box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        word-wrap: break-word;
        white-space: nowrap;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        z-index: 999;
        cursor: pointer;
        max-height: 70%;
        overflow-y: auto;
        overflow-x: hidden;
    }

    .post-toc .post-toc-title {
        width: 100%;
        margin: 0 auto;
        font-size: 20px;
        font-weight: 400;
        text-transform: uppercase;
        text-align: center;
    }

    .post-toc .post-toc-content {
        font-size: 15px;
    }

    .post-toc .post-toc-content>nav>ul {
        margin: 10px 0;
    }

    .post-toc .post-toc-content ul {
        padding-left: 20px;
        list-style: square;
        margin: 0.5em;
        line-height: 1.8em;
    }

    .post-toc .post-toc-content ul ul {
        padding-left: 15px;
        display: none;
    }

    @media print,
    screen and (max-width:1057px) {
        .post-toc {
            display: none;
        }
    }
</style>
<div class="post-toc" style="position: absolute; top: 188px;">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
        <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#什么是next-js">什么是Next.js？</a></li>
<li><a href="#介绍">介绍</a></li>
<li><a href="#项目设置">项目设置</a></li>
<li><a href="#发动机锁定">发动机锁定</a></li>
<li><a href="#git-设置">Git 设置</a></li>
<li><a href="#代码格式化和质量工具">代码格式化和质量工具</a>
<ul>
<li><a href="#艾斯林特">艾斯林特</a></li>
<li><a href="#漂亮">漂亮</a></li>
</ul></li>
<li><a href="#git-钩子">Git 钩子</a></li>
<li><a href="#vs-代码配置">VS 代码配置</a></li>
<li><a href="#调试">调试</a></li>
<li><a href="#目录结构">目录结构</a></li>
<li><a href="#添加故事书">添加故事书</a></li>
<li><a href="#创建组件模板">创建组件模板</a></li>
<li><a href="#使用组件模板">使用组件模板</a></li>
<li><a href="#添加自定义文档">添加自定义文档</a></li>
<li><a href="#添加布局">添加布局</a></li>
<li><a href="#下一步">下一步</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        var postToc = $(".post-toc");
        if (postToc.length) {
            var leftPos = $("#main").offset().left;
            if(leftPos<220){
                postToc.css({"width":leftPos-10,"margin-left":(0-leftPos)})
            }

            var t = postToc.offset().top - 20,
                a = {
                    start: {
                        position: "absolute",
                        top: t
                    },
                    process: {
                        position: "fixed",
                        top: 20
                    },
                };
            $(window).scroll(function () {
                var e = $(window).scrollTop();
                e < t ? postToc.css(a.start) : postToc.css(a.process)
            })
        }
    })
</script>
    <article class="post">
        <header>
            <h1 class="post-title">起步：如何为您的Next.js项目构建可扩展的架构</h1>
        </header>
        <date class="post-meta meta-date">
            2022年3月22日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            

<h2 id="什么是next-js">什么是Next.js？</h2>

<p><em>&ldquo;Next.js为您提供了最佳的开发人员体验，其中包含生产所需的所有功能：混合静态和服务器渲染，TypeScript支持，智能捆绑，路由预取等。无需配置。</em></p>

<p>正如他们上面所说的那样，Next.js是一个多合一的全栈现代应用程序构建解决方案。它包括对Typescript和React的一流支持，同时为现代应用程序中一些最常见的需求（如路由，API，postCSS工具和代码拆分）提供了简单的解决方案。</p>

<p>它还支持静态站点生成（用于可以在任何地方托管的闪电般快速的静态HTML页面）或托管托管服务，如Vercel / AWS / etc，这些服务运行Node服务器并支持完整的按需数据加载和服务器端呈现页面。</p>

<p>Next.js已迅速成为Web开发领域最需要的技能之一。本教程旨在作为文档的&rdquo;实用&rdquo;扩展，并帮助您使用许多最佳实践来设置项目，这些最佳实践将提高您在扩展时保持所有内容管理的机会。</p>

<h2 id="介绍">介绍</h2>

<p>本教程不是要取代官方文档，这绝对是太棒了。我强烈建议您在开始本教程之前至少通读基本功能部分，这样您就可以熟悉术语和工具以及它们提供的一些组件，这些组件与原始 HTML 对应项相似，但通常&rdquo;更强大&rdquo;。</p>

<p>请查看目录，以了解我们将在此扩展教程中涉及的每个主题。我会坦率地承认其中许多是严格和固执己见的配置，如果其中任何一个对你没有吸引力，那么在大多数情况下，你可以简单地跳过这些部分，并且仍然应该能够完成教程而不会有太多的麻烦。</p>

<p>现在，说了这么多，如果你准备好了，让我们直接潜入！</p>

<h2 id="项目设置">项目设置</h2>

<p>我们将首先使用 Typescript 模板创建一个默认的 Next.js 应用程序。</p>

<pre><code>npx create-next-app --ts nextjs-fullstack-app-template

cd nextjs-fullstack-app-template
</code></pre>

<p>首先，我们将进行测试以确保应用程序正常工作。我们将使用此示例，但如果您愿意，也可以同样轻松地使用 NPM。<code>yarn</code></p>

<pre><code>yarn install

yarn dev
</code></pre>

<p>您应该会在 <a href="http://localhost:3000/">http://localhost:3000</a> 上看到可用的演示应用程序</p>

<p><img src="https://cdn.jsdelivr.net/gh/zshipu/images/202204071340656.png" alt="第一页加载" /></p>

<p>还建议运行</p>

<pre><code>yarn build
</code></pre>

<p>确保您可以成功执行项目的生产生成。建议（但不是必需的）在运行 Next.js 生成时关闭开发服务器。大多数情况下没有问题，但有时生成可能会使您的开发服务器处于需要重新启动的奇怪状态。</p>

<p>您应该在命令行上获得一个漂亮的小报告，其中包含所有使用绿色文本构建的页面，这意味着它们很小且高效。在开发项目时，我们将尽量保持这种状态。</p>

<h2 id="发动机锁定">发动机锁定</h2>

<p>我们希望所有从事此项目的开发人员都使用我们正在使用的相同 Node 引擎和包管理器。为此，我们创建了两个新文件：</p>

<ul>
<li><code>.nvmrc</code>- 将告诉项目的其他用途使用哪个版本的Node</li>
<li><code>.npmrc</code>- 将告诉项目的其他用户使用哪个包管理器</li>
</ul>

<p>我们正在为这个项目使用和，所以我们这样设置这些值：<code>Node v14 Fermium</code><code>yarn</code></p>

<pre><code>.nvmrc
lts/fermium
</code></pre>

<pre><code>.npmrc
engine-strict=true
</code></pre>

<p>我们对 Node 使用 v14 而不是 v16 的原因是，在本教程的后面部分，我们将在 Vercel 上进行部署，不幸的是，Vercel 仍然不支持 Node 16。也许在你阅读本教程的时候，它可能会。您可以<a href="https://github.com/vercel/community/discussions/37">在此处</a>跟踪进度。</p>

<p>您可以检查您的 Node 版本，并确保设置了正确的版本。可以<a href="https://github.com/nodejs/Release/blob/main/CODENAMES.md">在此处</a>找到节点版本代号列表<code>node --version</code></p>

<p>请注意，使用<code>engine-strict</code><code>yarn</code><code>package.json</code></p>

<pre><code>package.json
  &quot;name&quot;: &quot;nextjs-fullstack-app-template&quot;,
  &quot;author&quot;: &quot;YOUR_NAME&quot;,
  &quot;description&quot;: &quot;A tutorial and template for creating a production-ready fullstack Next.js application&quot;,
  &quot;version&quot;: &quot;0.1.0&quot;,
  &quot;private&quot;: true,
  &quot;license&quot; : &quot;MIT&quot;
  &quot;homepage&quot;: &quot;YOUR_GIT_REPO_URL&quot;
  &quot;engines&quot;: {
    &quot;node&quot;: &quot;&gt;=14.0.0&quot;,
    &quot;yarn&quot;: &quot;&gt;=1.22.0&quot;,
    &quot;npm&quot;: &quot;please-use-yarn&quot;
  },
  ...
</code></pre>

<p>在该字段中，您可以指定所使用工具的特定版本。如果您愿意，您也可以填写您的个人详细信息。<code>engines</code></p>

<h2 id="git-设置">Git 设置</h2>

<p>这将是对远程存储库进行首次提交、确保备份更改以及遵循最佳做法以在移动到新内容之前将相关更改分组到单个提交中的好时机。</p>

<p>默认情况下，Next.js 项目将已初始化存储库。您可以使用 检查您使用的分支。它应该这样说：<code>git status</code></p>

<pre><code>On branch main
Changes not staged for commit:
  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)
  (use &quot;git restore &lt;file&gt;...&quot; to discard changes in working directory)
        modified:   README.md

Untracked files:
  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)
        .npmrc
        .nvmrc
</code></pre>

<p>这告诉我们，我们处于分支上，但尚未暂存或进行任何提交。<code>main</code></p>

<p>到目前为止，让我们提交更改。</p>

<pre><code>git add .

git commit -m 'project initialization'
</code></pre>

<p>第一个命令将添加和暂存项目目录中未被忽略的所有文件<code>.gitignore</code><code>-m</code></p>

<p>跳到您首选的 git 托管服务提供商（例如<a href="https://github.com/">Github</a>）并创建一个新的存储库来托管这个项目。确保将默认分支设置为与本地计算机上的分支相同的名称，以避免任何混淆。</p>

<p>在 Github 上，您可以通过以下方式将全局默认分支名称更改为您喜欢的任何名称：</p>

<pre><code>Settings -&gt; Repositories -&gt; Repository default branch
</code></pre>

<p>现在您已准备好添加存储库的远程源并推送。当你创建它时，Github 会给你确切的说明。根据您使用的是 HTTPS 而不是 SSH，您的语法可能与我的略有不同。</p>

<pre><code>git remote add origin git@github.com:{YOUR_GITHUB_USERNAME}/{YOUR_REPOSITORY_NAME}.git

git push -u origin {YOUR_BRANCH_NAME}
</code></pre>

<p>请注意，从现在开始，我们将使用<a href="https://www.conventionalcommits.org/en/v1.0.0/#summary">常规提交</a>标准，特别是<a href="https://github.com/angular/angular/blob/22b96b9/CONTRIBUTING.md#type">此处描述的 Angular 约定</a>的Angular约定。</p>

<p>原因与该项目中的许多其他功能一样，只是为所有开发人员设置一个<strong>一致</strong>的标准，以便在为项目做出贡献时最大限度地减少培训时间。我个人很少关心选择什么标准，只要每个人都同意遵循它是最重要的。</p>

<p>一致性就是一切！</p>

<h2 id="代码格式化和质量工具">代码格式化和质量工具</h2>

<p>为了制定一个可供项目所有贡献者使用的标准，以保持代码风格一致并遵循基本最佳实践，我们将实施两个工具：</p>

<ul>
<li><a href="https://eslint.org/">eslint</a> - 有关编码标准的最佳实践</li>
<li><a href="https://prettier.io/">漂亮</a>- 用于代码文件的自动格式化</li>
</ul>

<h3 id="艾斯林特">艾斯林特</h3>

<p>我们将从 ESLint 开始，这很容易，因为它会自动安装并预配置 Next.js 项目。</p>

<p>我们只是要添加一些额外的配置，并使其比默认的更严格一些。如果您不同意它设置的任何规则，无需担心，手动禁用任何规则都非常容易。我们配置根目录中应该已经存在的所有内容：<code>.eslintrc.json</code></p>

<pre><code>.eslintrc.json
{
  &quot;extends&quot;: [&quot;next&quot;, &quot;next/core-web-vitals&quot;, &quot;eslint:recommended&quot;],
  &quot;globals&quot;: {
    &quot;React&quot;: &quot;readonly&quot;
  },
  &quot;rules&quot;: {
    &quot;no-unused-vars&quot;: [1, { &quot;args&quot;: &quot;after-used&quot;, &quot;argsIgnorePattern&quot;: &quot;^_&quot; }]
  }
}
</code></pre>

<p>在上面的小代码示例中，我们添加了一些额外的默认值，我们说过<code>React</code></p>

<p>我发现当您正在开发一个功能并想要准备变量以供以后使用但尚未达到实现它们的地步时，经常会出现这种情况。</p>

<p>你可以通过运行来测试你的配置：</p>

<pre><code>yarn lint
</code></pre>

<p>您应该收到如下消息：</p>

<pre><code>✔ No ESLint warnings or errors
Done in 1.47s.
</code></pre>

<p>如果你遇到任何错误，那么 ESLint 非常擅长清楚地解释它们是什么。如果遇到不喜欢的规则，可以在&rdquo;规则&rdquo;中禁用它，只需将其设置为 1（警告）或 0（忽略），如下所示：</p>

<pre><code>  &quot;rules&quot;: {
    &quot;no-unused-vars&quot;: 0, // As example: Will never bug you about unused variables again
  }
</code></pre>

<p>此时，让我们使用消息进行提交<code>build: configure eslint</code></p>

<h3 id="漂亮">漂亮</h3>

<p>Prettier将负责为我们自动格式化我们的文件。现在让我们将其添加到项目中。</p>

<p>它仅在开发过程中需要，因此我将它添加为<code>devDependency</code><code>-D</code></p>

<pre><code>yarn add -D prettier
</code></pre>

<p>我还建议你获取Prettier VS Code扩展名，以便VS Code可以为你处理文件的格式设置，你不需要依赖命令行工具。在项目中安装和配置它意味着 VSCode 将使用项目的设置，因此仍需要在此处添加它。</p>

<p>我们将在根目录中创建两个文件：</p>

<pre><code>.prettierrc
{
  &quot;trailingComma&quot;: &quot;es5&quot;,
  &quot;tabWidth&quot;: 2,
  &quot;semi&quot;: true,
  &quot;singleQuote&quot;: true
}
</code></pre>

<p>这些值完全由您自行决定什么最适合您的团队和项目。</p>

<pre><code>.prettierignore
.yarn
.next
dist
node_modules
</code></pre>

<p>在那个文件中，我放置了一个我不希望 Prettier 浪费任何资源的目录列表。如果您愿意，您还可以使用 *.html 之类的模式来忽略文件类型组。</p>

<p>现在我们添加一个新脚本，<code>package.json</code></p>

<pre><code>package.json
  ...
  &quot;scripts: {
    ...
    &quot;prettier&quot;: &quot;prettier --write .&quot;
  }
</code></pre>

<p>您现在可以运行</p>

<pre><code>yarn prettier
</code></pre>

<p>自动格式化、修复和保存项目中您没有忽略的所有文件。默认情况下，我的格式化程序更新了大约 5 个文件。您可以在 VS Code 左侧的源代码控制选项卡中的已更改文件列表中看到它们。</p>

<p>让我们再次提交<code>build: implement prettier</code></p>

<h2 id="git-钩子">Git 钩子</h2>

<p>在我们开始进行组件开发之前，还有一节是关于配置的。请记住，如果您要长期构建它，特别是与其他开发人员团队合作，您将希望这个项目尽可能坚如磐石。一开始就花时间把它做好是值得的。</p>

<p>我们将实现一个名为<a href="https://typicode.github.io/husky/#/">赫斯基的工具</a></p>

<p>Husky 是一个用于在 git 进程的不同阶段运行脚本的工具，例如 add、commit、push 等。我们希望能够设置某些条件，并且只有在我们的代码满足时才允许 commit 和 push 这样的事情成功这些条件，假设它表明我们的项目质量可以接受。</p>

<p>安装赫斯基运行</p>

<pre><code>yarn add -D husky

npx husky install
</code></pre>

<p>第二个命令将<code>.husky</code></p>

<p>将以下脚本添加到您的<code>package.json</code></p>

<pre><code>package.json
  ...
  &quot;scripts: {
    ...
    &quot;prepare&quot;: &quot;husky install&quot;
  }
</code></pre>

<p>这将确保赫斯基在其他开发人员运行项目时自动安装。</p>

<p>创建挂钩运行</p>

<pre><code>npx husky add .husky/pre-commit &quot;yarn lint&quot;
</code></pre>

<p>上面说，为了使我们的提交成功，脚本必须首先运行并成功。在这种情况下，&rdquo;成功&rdquo;意味着没有错误。它将允许您有警告（请记住，在ESLint配置中，设置为1是警告，2是错误，以防您要调整设置）。<code>yarn lint</code></p>

<p>让我们用 message 创建一个新的提交<code>ci: implement husky</code></p>

<p>我们将添加另一个：</p>

<pre><code>npx husky add .husky/pre-push &quot;yarn build&quot;
</code></pre>

<p>以上确保了我们不允许推送到远程仓库，除非我们的代码可以成功构建。这似乎是一个非常合理的条件，不是吗？通过提交此更改并尝试推送来随意测试它。</p>

<hr />

<p>最后，我们将再添加一个工具。到目前为止，我们一直在遵循所有提交消息的标准约定，让我们确保团队中的每个人也都遵循它们（包括我们自己！）。我们可以为我们的提交消息添加一个 linter：</p>

<pre><code>yarn add -D @commitlint/config-conventional @commitlint/cli
</code></pre>

<p>要配置它，我们将使用一组标准默认值，但我喜欢将该列表显式包含在<code>commitlint.config.js</code></p>

<pre><code>commitlint.config.js
// build: Changes that affect the build system or external dependencies (example scopes: gulp, broccoli, npm)
// ci: Changes to our CI configuration files and scripts (example scopes: Travis, Circle, BrowserStack, SauceLabs)
// docs: Documentation only changes
// feat: A new feature
// fix: A bug fix
// perf: A code change that improves performance
// refactor: A code change that neither fixes a bug nor adds a feature
// style: Changes that do not affect the meaning of the code (white-space, formatting, missing semi-colons, etc)
// test: Adding missing tests or correcting existing tests

module.exports = {
  extends: ['@commitlint/config-conventional'],
  rules: {
    'body-leading-blank': [1, 'always'],
    'body-max-line-length': [2, 'always', 100],
    'footer-leading-blank': [1, 'always'],
    'footer-max-line-length': [2, 'always', 100],
    'header-max-length': [2, 'always', 100],
    'scope-case': [2, 'always', 'lower-case'],
    'subject-case': [
      2,
      'never',
      ['sentence-case', 'start-case', 'pascal-case', 'upper-case'],
    ],
    'subject-empty': [2, 'never'],
    'subject-full-stop': [2, 'never', '.'],
    'type-case': [2, 'always', 'lower-case'],
    'type-empty': [2, 'never'],
    'type-enum': [
      2,
      'always',
      [
        'build',
        'chore',
        'ci',
        'docs',
        'feat',
        'fix',
        'perf',
        'refactor',
        'revert',
        'style',
        'test',
        'translation',
        'security',
        'changeset',
      ],
    ],
  },
};
</code></pre>

<p>然后使用赫斯基启用 commitlint，方法是：</p>

<pre><code>npx husky add .husky/commit-msg 'npx --no -- commitlint --edit &quot;$1&quot;'
# Sometimes above command doesn't work in some command interpreters
# You can try other commands below to write npx --no -- commitlint --edit $1
# in the commit-msg file.
npx husky add .husky/commit-msg \&quot;npx --no -- commitlint --edit '$1'\&quot;
# or
npx husky add .husky/commit-msg &quot;npx --no -- commitlint --edit $1&quot;
</code></pre>

<p>您可以随意尝试一些不遵守规则的提交，看看它们是如何不被接受的，并且您会收到旨在帮助您纠正它们的反馈。</p>

<p>我现在要创建一个新的提交，其中包含消息。<code>ci: implement commitlint</code></p>

<p>您可以在下面的屏幕截图中看到此设置的完整高潮的结果，希望您的看起来相似：</p>

<p><img src="https://cdn.jsdelivr.net/gh/zshipu/images/202204071340658.png" alt="开发体验" /></p>

<h2 id="vs-代码配置">VS 代码配置</h2>

<p>现在我们已经实现了ESLint和Prettier，我们可以利用一些方便的VS Code功能来自动运行它们。</p>

<p>在调用的项目的根目录中创建一个目录，并在名为 .这将是覆盖已安装 VS Code 的默认设置的值列表。<code>.vscode</code><code>settings.json</code></p>

<p>我们希望将它们放在项目的文件夹中的原因是，我们可以设置仅适用于此项目的特定设置，并且可以通过将它们包含在代码存储库中来与团队的其他成员共享它们。</p>

<p>在里面，我们将添加以下值：<code>settings.json</code></p>

<pre><code>.vscode/settings.json
{
  &quot;editor.defaultFormatter&quot;: &quot;esbenp.prettier-vscode&quot;,
  &quot;editor.formatOnSave&quot;: true,
  &quot;editor.codeActionsOnSave&quot;: {
    &quot;source.fixAll&quot;: true,
    &quot;source.organizeImports&quot;: true
  }
}
</code></pre>

<p>上述内容将告诉 VS Code 使用您的 Prettier 扩展名作为默认格式化程序（如果您愿意，可以使用另一个格式化程序手动覆盖），并在每次保存时自动格式化文件并组织导入语句。</p>

<p>非常方便的东西，只是你不再需要考虑的另一件事，这样你就可以专注于重要的事情，比如解决业务问题。</p>

<p>我现在将使用消息进行提交。<code>build: implement vscode project settings</code></p>

<h2 id="调试">调试</h2>

<p>让我们设置一个方便的环境来调试我们的应用程序，以防我们在开发过程中遇到任何问题。</p>

<p>在目录内创建一个文件：<code>.vscode</code><code>launch.json</code></p>

<pre><code>launch.json
{
  &quot;version&quot;: &quot;0.1.0&quot;,
  &quot;configurations&quot;: [
    {
      &quot;name&quot;: &quot;Next.js: debug server-side&quot;,
      &quot;type&quot;: &quot;node-terminal&quot;,
      &quot;request&quot;: &quot;launch&quot;,
      &quot;command&quot;: &quot;npm run dev&quot;
    },
    {
      &quot;name&quot;: &quot;Next.js: debug client-side&quot;,
      &quot;type&quot;: &quot;pwa-chrome&quot;,
      &quot;request&quot;: &quot;launch&quot;,
      &quot;url&quot;: &quot;http://localhost:3000&quot;
    },
    {
      &quot;name&quot;: &quot;Next.js: debug full stack&quot;,
      &quot;type&quot;: &quot;node-terminal&quot;,
      &quot;request&quot;: &quot;launch&quot;,
      &quot;command&quot;: &quot;npm run dev&quot;,
      &quot;console&quot;: &quot;integratedTerminal&quot;,
      &quot;serverReadyAction&quot;: {
        &quot;pattern&quot;: &quot;started server on .+, url: (https?://.+)&quot;,
        &quot;uriFormat&quot;: &quot;%s&quot;,
        &quot;action&quot;: &quot;debugWithChrome&quot;
      }
    }
  ]
}
</code></pre>

<p>使用该脚本后，您有三个调试选择。单击VS Code左侧的小&rdquo;bug &amp;play图标&rdquo;或按以访问调试菜单。您可以选择要运行的脚本，并使用启动/停止按钮启动/停止它。<code>Ctrl + Shift + D</code></p>

<p><img src="https://cdn.jsdelivr.net/gh/zshipu/images/202204071340659.png" alt="VS 代码调试器" /></p>

<p>除此之外，或者如果你没有使用 VS Code，我们还可以在项目中设置一些有用的调试脚本。</p>

<p>首先，我们将安装<a href="https://www.npmjs.com/package/cross-env">跨环境</a>;如果您的队友在不同的环境（Windows、Linux、Mac 等）上工作，则有必要设置环境变量。</p>

<pre><code>yarn add -D cross-env
</code></pre>

<p>安装该软件包后，我们可以将<code>package.json</code><code>dev</code></p>

<pre><code>package.json
{
  ...
  &quot;scripts&quot;: {
    ...
    &quot;dev&quot;: &quot;cross-env NODE_OPTIONS='--inspect' next dev&quot;,
  },
}
</code></pre>

<p>这将允许你在开发模式下工作时在浏览器中记录服务器数据，从而更轻松地调试问题。</p>

<p>在此阶段，我将使用消息进行新的提交<code>build: add debugging configuration</code></p>

<h2 id="目录结构">目录结构</h2>

<p>本节现在将介绍在我们的项目中设置文件夹结构。这是许多人会有*非常强烈的意见*的主题之一，并且有充分的理由！从长远来看，当项目失控时，目录结构确实可以成就或破坏项目，尤其是当团队成员不得不花费不必要的时间来猜测将东西放在哪里（或找到东西）时。</p>

<p>我个人喜欢采取一种相当简单的方法，基本上以类模型/视图风格将事物分开。我们将使用三个主要文件夹：</p>

<pre><code>/components
/lib
/pages
</code></pre>

<ul>
<li><code>component</code>- 构成应用程序的各个UI组件将位于此处</li>
<li><code>lib</code>- 业务/应用程序/域逻辑将位于此处。</li>
<li><code>pages</code>- 将是所需的实际路由/页面 Next.js 结构。</li>
</ul>

<p>除此之外，我们还将有其他文件夹来支持该项目，但构成我们正在构建的独特应用程序的几乎所有内容的核心都将位于这三个目录中。</p>

<p>在<a href="https://mui.com/getting-started/installation/">文档中用于组件的相同组织</a><code>components</code></p>

<p>例如输入、表面、导航、实用程序、布局等。</p>

<p>您无需提前创建这些目录并将它们留空。我会在构建组件的同时创建它们。</p>

<p>本节旨在解释我将如何设置这个项目，您可以选择许多其他方式来组织您的项目，我鼓励您选择最适合您和您的团队的方式。</p>

<p>在这一点上，我将使用消息进行提交<code>rfc: create directory structure</code></p>

<h2 id="添加故事书">添加故事书</h2>

<p>如果您还不熟悉它，我们可以使用的最棒的现代工具之一叫做<a href="https://storybook.js.org/">故事</a>。</p>

<p>Storybook 为我们提供了一个环境来展示和测试我们在使用它们的应用程序之外构建的 React 组件。它是连接开发人员和设计人员并能够根据设计要求验证我们开发的组件外观和功能的好工具在一个隔离的环境中，没有应用程序其余部分的开销。</p>

<p>请注意，Storybook 是一种可视化测试工具，稍后我们将实现其他工具用于功能单元测试和端到端测试。</p>

<p>学习如何使用 Storybook 的最佳方法是安装并试用！</p>

<pre><code>npx sb init --builder webpack5
</code></pre>

<p>我们将使用 webpack5 版本来与最新版本的 webpack 保持同步（我不确定为什么它还不是默认版本。也许在您使用本教程时就会出现）。</p>

<p>当 Storybook 安装时，它会自动检测关于你的项目的很多事情，比如它是一个 React 应用程序，以及你正在使用的其他工具。它应该注意所有配置本身。</p>

<p>如果您收到有关 eslintPlugin 的提示，您可以说&rdquo;是&rdquo;。不过，我们将手动配置它，所以如果您收到一条消息说它没有自动配置，请不要担心。</p>

<p>打开<code>.eslintrc.json</code></p>

<pre><code>.eslintrc.json
{
  &quot;extends&quot;: [
    &quot;plugin:storybook/recommended&quot;, // New
    &quot;next&quot;,
    &quot;next/core-web-vitals&quot;,
    &quot;eslint:recommended&quot;
  ],
  &quot;globals&quot;: {
    &quot;React&quot;: &quot;readonly&quot;
  },
  // New
  &quot;overrides&quot;: [
    {
      &quot;files&quot;: [&quot;*.stories.@(ts|tsx|js|jsx|mjs|cjs)&quot;],
      &quot;rules&quot;: {
        // example of overriding a rule
        &quot;storybook/hierarchy-separator&quot;: &quot;error&quot;
      }
    }
  ],
  &quot;rules&quot;: {
    &quot;no-unused-vars&quot;: [1, { &quot;args&quot;: &quot;after-used&quot;, &quot;argsIgnorePattern&quot;: &quot;^_&quot; }]
  }
}
</code></pre>

<p>我添加了标记特定于故事书的两个新部分和行。<code>// New</code></p>

<p>您会注意到Storybook还作为目录添加到项目的根目录中，其中包含许多示例。如果您不熟悉Storybook，我强烈建议您浏览它们并将它们留在那里，直到您习惯于在没有模板的情况下创建自己的模板。<code>/stories</code></p>

<p>在运行它之前，我们需要确保我们使用的是webpack5。将以下内容添加到您的文件中：<code>package.json</code></p>

<pre><code>package.json
{
  ...
  &quot;resolutions&quot;: {
    &quot;webpack&quot;: &quot;^5&quot;
  }
}
</code></pre>

<p>然后运行</p>

<pre><code>yarn install
</code></pre>

<p>确保安装了 webpack5。</p>

<p>接下来，我们必须更新文件：<code>.storybook/main.js</code></p>

<pre><code>storybook/main.js
module.exports = {
  stories: ['../**/*.stories.mdx', '../**/*.stories.@(js|jsx|ts|tsx)'],
  /** Expose public folder to storybook as static */
  staticDirs: ['../public'],
  addons: [
    '@storybook/addon-links',
    '@storybook/addon-essentials',
    '@storybook/addon-interactions',
  ],
  framework: '@storybook/react',
  core: {
    builder: '@storybook/builder-webpack5',
  },
};
</code></pre>

<p>在这里，我们更改了故事文件的模式，以便它将拾取组件（或其他）目录中的任何文件。<code>.stories</code></p>

<p>我们还将 Next.js 的&rdquo;公共&rdquo;文件夹公开为静态目录，以便我们可以在 Storybook 中测试图像、媒体等内容。</p>

<p>最后，在我们运行 Storybook 本身之前，让我们在<code>storybook/preview.js</code></p>

<pre><code>storybook/preview.js
import '../styles/globals.css';
import * as NextImage from 'next/image';

const BREAKPOINTS_INT = {
  xs: 375,
  sm: 600,
  md: 900,
  lg: 1200,
  xl: 1536,
};

const customViewports = Object.fromEntries(
  Object.entries(BREAKPOINTS_INT).map(([key, val], idx) =&gt; {
    console.log(val);
    return [
      key,
      {
        name: key,
        styles: {
          width: `${val}px`,
          height: `${(idx + 5) * 10}vh`,
        },
      },
    ];
  })
);

// Allow Storybook to handle Next's &lt;Image&gt; component
const OriginalNextImage = NextImage.default;

Object.defineProperty(NextImage, 'default', {
  configurable: true,
  value: (props) =&gt; &lt;OriginalNextImage {...props} unoptimized /&gt;,
});

export const parameters = {
  actions: { argTypesRegex: '^on[A-Z].*' },
  controls: {
    matchers: {
      color: /(background|color)$/i,
      date: /Date$/,
    },
  },
  viewport: { viewports: customViewports },
};
</code></pre>

<p>上面有一些个人偏好，但您可以根据需要进行配置。请务必将默认断点设置为与应用中对你很重要的任何内容相匹配。我们还添加了一个处理程序，以便 Storybook 可以处理 Next 的组件而不会崩溃。<code>&lt;Image&gt;</code></p>

<p>现在我们准备测试它。跑：</p>

<pre><code>yarn storybook
</code></pre>

<p>如果一切顺利，您将在主机中看到一条消息，如下所示：</p>

<p><img src="https://cdn.jsdelivr.net/gh/zshipu/images/202204071340660.png" alt="故事书开始" /></p>

<p>您将能够在<a href="http://localhost:6006">http://localhost:6006</a></p>

<p><img src="https://cdn.jsdelivr.net/gh/zshipu/images/202204071340661.png" alt="故事书主" /></p>

<p>如果您以前从未使用过它，我会鼓励您尝试并熟悉这些示例。</p>

<p>在这个阶段，我将使用 message 进行提交<code>build: implement storybook</code></p>

<h2 id="创建组件模板">创建组件模板</h2>

<p>现在是时候将我们所做的所有配置整合在一起，看看我们如何使用我们为自己设定的标准来创建和实现我们的第一个组件。</p>

<p>我们只需创建一个简单的卡片。创建以下目录结构：</p>

<pre><code>/components/templates/base
</code></pre>

<p>在该目录中，我们将创建 .这将遵循文件名的标准模式，该模式与导致它的目录相匹配。例如，这允许我们在目录中拥有其他类型的卡，例如等。<code>BaseTemplate.tsx</code><code>cards</code><code>PhotoCard</code><code>TextCard</code></p>

<pre><code>BaseTemplate.tsx
export interface IBaseTemplate {}

const BaseTemplate: React.FC&lt;IBaseTemplate&gt; = () =&gt; {
  return &lt;div&gt;Hello world!&lt;/div&gt;;
};

export default BaseTemplate;
</code></pre>

<p>我们的每一个组件都将遵循这个精确的结构。即使它不使用 props，它仍然会为组件导出一个空的 props 接口。这样做的原因是它将允许我们在许多组件和文件中复制这种精确的结构，并使用相同的预期模式交换组件/导入，并且只需查找/替换组件的名称。</p>

<p>当您开始使用故事和模拟道具等时，您很快就会发现为所有组件文件维护一致的命名方案和界面是多么方便和强大。</p>

<p>这可以追溯到我们之前提出的所有观点的<strong>一致性。</strong></p>

<p>接下来，我将制作一个位于组件旁边的样式模块文件。默认情况下，Next.js 为您提供了一个<code>/styles</code></p>

<pre><code>BaseTemplate.module.css
.component {
}
</code></pre>

<p>作为一个标准的空模板，您的顶级样式将在您的组件上使用。您可以按以下方式更新您<code>BaseTemplate</code></p>

<pre><code>BaseTemplate.tsx
import styles from './BaseTemplate.module.css';

export interface IBaseTemplate {}

const BaseTemplate: React.FC&lt;IBaseTemplate&gt; = () =&gt; {
  return &lt;div className={styles.container}&gt;Hello world!&lt;/div&gt;;
};

export default BaseTemplate;
</code></pre>

<p>现在我们有一个干净的样式模板。</p>

<p>让我们向模板中添加一个示例 prop，以便我们可以处理我们将用于组件 prop 的标准：</p>

<pre><code>BaseTemplate.tsx
import styles from './BaseTemplate.module.css';

export interface IBaseTemplate {
  sampleTextProp: string;
}

const BaseTemplate: React.FC&lt;IBaseTemplate&gt; = ({ sampleTextProp }) =&gt; {
  return &lt;div className={styles.container}&gt;{sampleTextProp}&lt;/div&gt;;
};

export default BaseTemplate;
</code></pre>

<p>对于我们创建的每个组件，我们都需要一种非常快速和简单的方法来在不同的环境中测试它（例如 Storybook，还有应用程序，也许还有我们的单元测试）。快速访问数据以呈现组件会很方便。</p>

<p>让我们创建一个文件来存储该组件用于测试的一些模拟数据：</p>

<pre><code>BaseTemplate.mocks.ts
import { IBaseTemplate } from './BaseTemplate';

const base: IBaseTemplate = {
  sampleTextProp: 'Hello world!',
};

export const mockBaseTemplateProps = {
  base,
};
</code></pre>

<p>这种结构可能看起来有点复杂，但我们很快就会看到好处。我使用非常有意的一致命名模式，因此此模板非常容易复制并粘贴到您创建的每个新组件中。</p>

<p>现在，让我们为此组件创建一个创建故事：</p>

<pre><code>BaseTemplate.stories.tsx
import { ComponentStory, ComponentMeta } from '@storybook/react';
import BaseTemplate, { IBaseTemplate } from './BaseTemplate';
import { mockBaseTemplateProps } from './BaseTemplate.mocks';

export default {
  title: 'templates/BaseTemplate',
  component: BaseTemplate,
  // More on argTypes: https://storybook.js.org/docs/react/api/argtypes
  argTypes: {},
} as ComponentMeta&lt;typeof BaseTemplate&gt;;

// More on component templates: https://storybook.js.org/docs/react/writing-stories/introduction#using-args
const Template: ComponentStory&lt;typeof BaseTemplate&gt; = (args) =&gt; (
  &lt;BaseTemplate {...args} /&gt;
);

export const Base = Template.bind({});
// More on args: https://storybook.js.org/docs/react/writing-stories/args

Base.args = {
  ...mockBaseTemplateProps.base,
} as IBaseTemplate;
</code></pre>

<p>我不打算详细介绍文件的每个不同部分需要什么，因为您最好的资源是官方的故事书文档。<code>stories</code></p>

<p>这里的目标是创建一个一致的、易于复制/粘贴的组件构建和测试模式。</p>

<p>让我们试试这个。跑步：</p>

<pre><code>yarn storybook
</code></pre>

<p>如果一切顺利，您将看到外观精美的基本组件（如果不是，我建议您重新访问上一节并检查是否错过了任何配置）。</p>

<p><img src="https://cdn.jsdelivr.net/gh/zshipu/images/202204071340662.png" alt="故事书基础模板" /></p>

<p>现在我们开始创建更多文件，最好养成在提交之前运行的习惯，以确保一切都很干净并准备就绪。我将使用消息进行提交。<code>yarn lint</code><code>build: create BaseTemplate component</code></p>

<h2 id="使用组件模板">使用组件模板</h2>

<p>由于我们有了模板，让我们来看看使用它来创建一个真实组件的过程。</p>

<p>创建目录。然后将整个目录从 复制到 并重命名它。我们将制作一个.重命名每个文件以进行匹配。完成后，它应该看起来像这样：<code>components/cards</code><code>base</code><code>templates</code><code>cards</code><code>cat</code><code>CatCard</code></p>

<p><img src="https://cdn.jsdelivr.net/gh/zshipu/images/202204071340663.png" alt="组件目录结构" /></p>

<p>现在，您可以在 VS Code 中按（或等效 mac）来执行完整的项目搜索和替换。仅包含并执行替换 以替换 。它应如下所示：<code>ctrl + shift + F</code><code>components/cards/cat</code><code>CatCard</code><code>BaseTemplate</code></p>

<p><img src="https://cdn.jsdelivr.net/gh/zshipu/images/202204071340664.png" alt="VS 代码查找替换" /></p>

<p>现在你已经准备好工作了，你有一个干净的预生成的模板，包括故事和卡片的模拟数据。相当方便！让我们让它看起来像一张真正的卡：</p>

<p><em>（为了记录，我没有创建这张漂亮的卡片，它基于才华横溢的里昂Etyo在这里创建的示例）</em></p>

<pre><code>CatCard.tsx
import styles from './CatCard.module.css';
import Image from 'next/image';

export interface ICatCard {
  tag: string;
  title: string;
  body: string;
  author: string;
  time: string;
}

const CatCard: React.FC&lt;ICatCard&gt; = ({ tag, title, body, author, time }) =&gt; {
  return (
    &lt;div className={styles.container}&gt;
      &lt;div className={styles.card}&gt;
        &lt;div className={styles.card__header}&gt;
          &lt;Image
            src=&quot;/time-cat.jpg&quot;
            alt=&quot;card__image&quot;
            className={styles.card__image}
            width=&quot;600&quot;
            height=&quot;400&quot;
          /&gt;
        &lt;/div&gt;
        &lt;div className={styles.card__body}&gt;
          &lt;span className={`${styles.tag} ${styles['tag-blue']}`}&gt;{tag}&lt;/span&gt;
          &lt;h4&gt;{title}&lt;/h4&gt;
          &lt;p&gt;{body}&lt;/p&gt;
        &lt;/div&gt;
        &lt;div className={styles.card__footer}&gt;
          &lt;div className={styles.user}&gt;
            &lt;Image
              src=&quot;https://i.pravatar.cc/40?img=3&quot;
              alt=&quot;user__image&quot;
              className={styles.user__image}
              width=&quot;40&quot;
              height=&quot;40&quot;
            /&gt;
            &lt;div className={styles.user__info}&gt;
              &lt;h5&gt;{author}&lt;/h5&gt;
              &lt;small&gt;{time}&lt;/small&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default CatCard;
</code></pre>

<p>设置样式：</p>

<pre><code>CatCard.module.css
@import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&amp;display=swap');

.container {
  margin: 1rem;
}

.container * {
  box-sizing: border-box;
  padding: 0;
  margin: 0;
}

.card__image {
  max-width: 100%;
  display: block;
  object-fit: cover;
}

.card {
  font-family: 'Quicksand', sans-serif;
  display: flex;
  flex-direction: column;
  width: clamp(20rem, calc(20rem + 2vw), 22rem);
  overflow: hidden;
  box-shadow: 0 0.1rem 1rem rgba(0, 0, 0, 0.1);
  border-radius: 1em;
  background: #ece9e6;
  background: linear-gradient(to right, #ffffff, #ece9e6);
}

.card__body {
  padding: 1rem;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.tag {
  align-self: flex-start;
  padding: 0.25em 0.75em;
  border-radius: 1em;
  font-size: 0.75rem;
}

.tag-blue {
  background: #56ccf2;
  background: linear-gradient(to bottom, #2f80ed, #56ccf2);
  color: #fafafa;
}

.card__body h4 {
  font-size: 1.5rem;
  text-transform: capitalize;
}

.card__footer {
  display: flex;
  padding: 1rem;
  margin-top: auto;
}

.user {
  display: flex;
  gap: 0.5rem;
}

.user__image {
  border-radius: 50%;
}

.user__info &gt; small {
  color: #666;
}
</code></pre>

<p>并设置模拟数据：</p>

<pre><code>CatCard.mocks.ts
import { ICatCard } from './CatCard';

const base: ICatCard = {
  tag: 'Felines',
  title: `What's new in Cats`,
  body: 'Lorem ipsum dolor sit amet consectetur adipisicing elit. Sequi perferendis molestiae non nemo doloribus. Doloremque, nihil! At ea atque quidem!',
  author: 'Alex',
  time: '2h ago',
};

export const mockCatCardProps = {
  base,
};
</code></pre>

<p>请注意，这使用了项目公共目录中的猫的图像。您可以在项目存储库中找到它。<code>(/time-cat.jpg)</code></p>

<p>我们唯一需要更新的是将故事标题从更改为<code>CatCard.stories</code><code>templates/CatCard</code><code>cards/CatCard</code></p>

<p>我们确实需要更新我们的域名，因为我们正在使用一个我们没有明确声明为允许的域名（对于头像）。只需将配置文件更新为如下所示：<code>next.config.js</code></p>

<pre><code>next.config.js
/** @type {import('next').NextConfig} */
const nextConfig = {
  reactStrictMode: true,
  images: {
    domains: ['i.pravatar.cc'],
  },
};

module.exports = nextConfig;
</code></pre>

<p>或者，您可以将头像图像放在您自己的公共目录中，但为了学习使用外部域的过程，我们将保留此设置。</p>

<p>现在，修女故事书，如果你幸运的话，你会受到以下欢迎：</p>

<p><img src="https://cdn.jsdelivr.net/gh/zshipu/images/202204071340665.png" alt="故事书猫卡" /></p>

<p>然后，可以轻松地将此组件放在实际应用程序中的任何位置。在测试时短期内使用道具，并在准备就绪时更换为真正的道具！<code>mock</code></p>

<pre><code>pages/index.tsx
import type { NextPage } from 'next';
import Head from 'next/head';
import Image from 'next/image';
import CatCard from '../components/cards/cat/CatCard';
import { mockCatCardProps } from '../components/cards/cat/CatCard.mocks';
import styles from '../styles/Home.module.css';

const Home: NextPage = () =&gt; {
  return (
    &lt;div className={styles.container}&gt;
      &lt;Head&gt;
        &lt;title&gt;Create Next App&lt;/title&gt;
        &lt;meta name=&quot;description&quot; content=&quot;Generated by create next app&quot; /&gt;
        &lt;link rel=&quot;icon&quot; href=&quot;/favicon.ico&quot; /&gt;
      &lt;/Head&gt;

      &lt;main className={styles.main}&gt;
        &lt;h1 className={styles.title}&gt;
          Welcome to &lt;a href=&quot;https://nextjs.org&quot;&gt;Next.js!&lt;/a&gt;
        &lt;/h1&gt;

        &lt;div className={styles.grid}&gt;
          &lt;CatCard {...mockCatCardProps.base} /&gt;
          &lt;CatCard {...mockCatCardProps.base} /&gt;
          &lt;CatCard {...mockCatCardProps.base} /&gt;
          &lt;CatCard {...mockCatCardProps.base} /&gt;
        &lt;/div&gt;
      &lt;/main&gt;

      &lt;footer className={styles.footer}&gt;
        &lt;a
          href=&quot;https://vercel.com?utm_source=create-next-app&amp;utm_medium=default-template&amp;utm_campaign=create-next-app&quot;
          target=&quot;_blank&quot;
          rel=&quot;noopener noreferrer&quot;
        &gt;
          Powered by{' '}
          &lt;span className={styles.logo}&gt;
            &lt;Image src=&quot;/vercel.svg&quot; alt=&quot;Vercel Logo&quot; width={72} height={16} /&gt;
          &lt;/span&gt;
        &lt;/a&gt;
      &lt;/footer&gt;
    &lt;/div&gt;
  );
};

export default Home;
</code></pre>

<p>让我们来看看最终的杰作：</p>

<pre><code>yarn dev
</code></pre>

<p><img src="https://cdn.jsdelivr.net/gh/zshipu/images/202204071340666.png" alt="最终杰作" /></p>

<h2 id="添加自定义文档">添加自定义文档</h2>

<p>尽管在此阶段没有必要，但你可能希望对应用中的内容进行更精细的控制。通过在目录中创建自定义设置，您可以执行此操作。立即创建该文件。<code>&lt;head&gt;</code><code>_document.tsx</code><code>pages</code></p>

<pre><code>pages/_document.tsx
import Document, { Head, Html, Main, NextScript } from 'next/document';

class MyDocument extends Document {
  render() {
    return (
      &lt;Html&gt;
        &lt;Head&gt;
          &lt;link rel=&quot;preconnect&quot; href=&quot;https://fonts.googleapis.com&quot; /&gt;
          &lt;link rel=&quot;preconnect&quot; href=&quot;https://fonts.gstatic.com&quot; /&gt;
          &lt;link
            href=&quot;https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&amp;display=swap&quot;
            rel=&quot;stylesheet&quot;
          /&gt;
        &lt;/Head&gt;
        &lt;body&gt;
          &lt;Main /&gt;
          &lt;NextScript /&gt;
        &lt;/body&gt;
      &lt;/Html&gt;
    );
  }
}

export default MyDocument;
</code></pre>

<p><em>请注意，我已经从<code>组件/卡片/cat/CatCard.module</code>中删除了@importURL字体.css并将Google字体放在头部以预加载。</em></p>

<p>现在，您需要在元素中执行或自定义的任何其他操作都可以在此文件中完成。<code>&lt;head&gt;</code></p>

<p>请注意，这与从 中导入的那个不同。它们都将协同工作，并且此数据仅用于您希望在每个页面上加载的数据。<code>&lt;Head&gt;</code><code>next/head</code></p>

<p>有关如何使用自定义的更多信息，请参阅文档。<code>_document</code></p>

<h2 id="添加布局">添加布局</h2>

<p>布局是 Next.js 中的一个重要概念。它们可帮助您管理页面之间的状态。对于本节，我们将使用与官方示例中提供的相同的基本模板，并简单地对其进行自定义以适应我们的项目。</p>

<p>创建一个名为 的新目录。我们将再次复制我们的目录两次。一个要呼叫，一个呼叫。完成后，它应如下所示：<code>layouts</code><code>components</code><code>templates/case</code><code>primary</code><code>sidebar</code></p>

<p><img src="https://cdn.jsdelivr.net/gh/zshipu/images/202204071340667.png" alt="布局文件夹" /></p>

<p>执行区分大小写的查找/替换<code>BaseTemplate</code><code>PrimaryLayout</code><code>SidebarLayout</code></p>

<p>如果您对这一步有任何困难，请随时<a href="https://github.com/alexeagleson/nextjs-fullstack-app-template">从 repo 中获取结构</a>。</p>

<p>这些布局模板的结构归功于 Vercel 的*<em>leerob*和*JJ Kasper</em>*</p>

<p>更新 和 的内容<code>PrimaryLayout.tsx</code><code>PrimaryLayout.module.css</code></p>

<pre><code>components/layouts/primary/PrimaryLayout.tsx
import Head from 'next/head';
import styles from './PrimaryLayout.module.css';

export interface IPrimaryLayout {}

const PrimaryLayout: React.FC&lt;IPrimaryLayout&gt; = ({ children }) =&gt; {
  return (
    &lt;&gt;
      &lt;Head&gt;
        &lt;title&gt;Primary Layout Example&lt;/title&gt;
      &lt;/Head&gt;
      &lt;main className={styles.main}&gt;{children}&lt;/main&gt;
    &lt;/&gt;
  );
};

export default PrimaryLayout;
</code></pre>

<pre><code>components/layouts/primary/PrimaryLayout.module.css
.main {
  display: flex;
  height: calc(100vh - 64px);
  background-color: white;
}

.main &gt; section {
  padding: 32px;
}
</code></pre>

<p>然后是侧边栏：</p>

<pre><code>components/layouts/sidebar/SidebarLayout.tsx
import Link from 'next/link';
import styles from './SidebarLayout.module.css';

export interface ISidebarLayout {}

const SidebarLayout: React.FC&lt;ISidebarLayout&gt; = () =&gt; {
  return (
    &lt;nav className={styles.nav}&gt;
      &lt;input className={styles.input} placeholder=&quot;Search...&quot; /&gt;
      &lt;Link href=&quot;/&quot;&gt;
        &lt;a&gt;Home&lt;/a&gt;
      &lt;/Link&gt;
      &lt;Link href=&quot;/about&quot;&gt;
        &lt;a&gt;About&lt;/a&gt;
      &lt;/Link&gt;
      &lt;Link href=&quot;/contact&quot;&gt;
        &lt;a&gt;Contact&lt;/a&gt;
      &lt;/Link&gt;
    &lt;/nav&gt;
  );
};

export default SidebarLayout;
</code></pre>

<pre><code>components/layouts/sidebar/SidebarLayout.module.css
.nav {
  height: 100%;
  display: flex;
  flex-direction: column;
  width: 250px;
  background-color: #fafafa;
  padding: 32px;
  border-right: 1px solid #eaeaea;
}

.nav &gt; a {
  margin: 8px 0;
  text-decoration: none;
  background: white;
  border-radius: 4px;
  font-size: 14px;
  padding: 12px 16px;
  text-transform: uppercase;
  font-weight: 600;
  letter-spacing: 0.025em;
  color: #333;
  border: 1px solid #eaeaea;
  transition: all 0.125s ease;
}

.nav &gt; a:hover {
  background-color: #eaeaea;
}

.input {
  margin: 32px 0;
  text-decoration: none;
  background: white;
  border-radius: 4px;
  border: 1px solid #eaeaea;
  font-size: 14px;
  padding: 8px 16px;
  height: 28px;
}
</code></pre>

<p>现在这些模板已经创建，我们需要使用它们。我们将更新主页并创建另一个页面，该页面调用以显示如何使用共享布局并在页面之间保留组件状态。<code>about.tsx</code></p>

<p>首先，我们需要添加一个扩展默认接口的类型，因为出于某种原因，它不包括开箱即用的功能。创建一个自定义类型文件，该文件将受此解决方案的启发为我们处理<code>NextPage</code><code>getLayout</code></p>

<pre><code>pages/page.d.ts
import { NextPage } from 'next';
import { ComponentType, ReactElement, ReactNode } from 'react';

export type NextPageWithLayout&lt;P = {}&gt; = NextPage&lt;P&gt; &amp; {
  getLayout?: (_page: ReactElement) =&gt; ReactNode;
  layout?: ComponentType;
};
</code></pre>

<p>现在，您可以使用该界面代替需要创建具有自定义布局的页面的时间。<code>NextPageWithLayout</code><code>NextPage</code></p>

<p>现在让我们更新我们的主页：</p>

<pre><code>pages/index.tsx
import CatCard from '../components/cards/cat/CatCard';
import { mockCatCardProps } from '../components/cards/cat/CatCard.mocks';
import PrimaryLayout from '../components/layouts/primary/PrimaryLayout';
import SidebarLayout from '../components/layouts/sidebar/SidebarLayout';
import styles from '../styles/Home.module.css';
import { NextPageWithLayout } from './page';

const Home: NextPageWithLayout = () =&gt; {
  return (
    &lt;section className={styles.main}&gt;
      &lt;h1 className={styles.title}&gt;
        Welcome to &lt;a href=&quot;https://nextjs.org&quot;&gt;Next.js!&lt;/a&gt;
      &lt;/h1&gt;
      &lt;CatCard {...mockCatCardProps.base} /&gt;
    &lt;/section&gt;
  );
};

export default Home;

Home.getLayout = (page) =&gt; {
  return (
    &lt;PrimaryLayout&gt;
      &lt;SidebarLayout /&gt;
      {page}
    &lt;/PrimaryLayout&gt;
  );
};
</code></pre>

<p>并在目录中创建一个新页面：<code>about</code><code>pages</code></p>

<pre><code>pages/about.tsx
import PrimaryLayout from '../components/layouts/primary/PrimaryLayout';
import SidebarLayout from '../components/layouts/sidebar/SidebarLayout';
import { NextPageWithLayout } from './page';

const About: NextPageWithLayout = () =&gt; {
  return (
    &lt;section&gt;
      &lt;h2&gt;Layout Example (About)&lt;/h2&gt;
      &lt;p&gt;
        This example adds a property &lt;code&gt;getLayout&lt;/code&gt; to your page,
        allowing you to return a React component for the layout. This allows you
        to define the layout on a per-page basis. Since we&amp;apos;re returning a
        function, we can have complex nested layouts if desired.
      &lt;/p&gt;
      &lt;p&gt;
        When navigating between pages, we want to persist page state (input
        values, scroll position, etc.) for a Single-Page Application (SPA)
        experience.
      &lt;/p&gt;
      &lt;p&gt;
        This layout pattern will allow for state persistence because the React
        component tree is persisted between page transitions. To preserve state,
        we need to prevent the React component tree from being discarded between
        page transitions.
      &lt;/p&gt;
      &lt;h3&gt;Try It Out&lt;/h3&gt;
      &lt;p&gt;
        To visualize this, try tying in the search input in the{' '}
        &lt;code&gt;Sidebar&lt;/code&gt; and then changing routes. You&amp;apos;ll notice the
        input state is persisted.
      &lt;/p&gt;
    &lt;/section&gt;
  );
};

export default About;

About.getLayout = (page) =&gt; {
  return (
    &lt;PrimaryLayout&gt;
      &lt;SidebarLayout /&gt;
      {page}
    &lt;/PrimaryLayout&gt;
  );
};
</code></pre>

<p>最后，在我更新的文件中，我将其用作占位符值，以在Storybook中显示组件的位置，并且我已经删除了模拟属性（尽管我没有删除该文件，因此我已经准备好了界面，以防我需要添加prop）。<code>mocks</code><code>PrimaryLayout.mocks.ts</code><code>children: '{{component}}'</code><code>SidebarLayout.mocks.ts</code></p>

<p>我还将故事标题从 更改为 。<code>templates/...</code><code>layouts/...</code></p>

<p>最后，我们可以测试一下。保存并运行</p>

<pre><code>yarn dev
</code></pre>

<p>在边栏上的两个路线（&rdquo;主页&rdquo;和&rdquo;关于&rdquo;）之间单击以在页面之间切换。请注意，使用的布局将持续存在，而无需重新加载（正如我们的意图一样），您将获得超级快速和快速的体验。</p>

<p><img src="https://cdn.jsdelivr.net/gh/zshipu/images/202204071340668.png" alt="下一个布局 01" /></p>

<p><img src="https://cdn.jsdelivr.net/gh/zshipu/images/202204071340669.png" alt="下一个布局 02" /></p>

<p>在 Storybook 方面，我们甚至可以独立于应用程序查看和测试布局组件。如果没有内容，它就不会太有用，但是侧边栏非常好。<code>PrimaryLayout</code></p>

<pre><code>yarn storybook
</code></pre>

<p><img src="https://cdn.jsdelivr.net/gh/zshipu/images/202204071340670.png" alt="故事书侧边栏" /></p>

<p>最后一步是展示 Next.js 应用的部署过程。</p>

<p>我们将使用 Vercel，因为它是 Next.js 应用程序最简单、最直接的部署解决方案（主要是因为 Vercel 拥有 Next，因此人们总是可以假设它们将提供一流的支持）。</p>

<p>请注意，Vercel 绝对不是唯一的选择，如果您选择走这条路，其他主要服务（如<a href="https://aws.amazon.com/blogs/mobile/host-a-next-js-ssr-app-with-real-time-data-on-aws-amplify/">断续器</a>、<a href="https://www.netlify.com/with/nextjs/">网易</a>等）都可以正常工作。</p>

<pre><code>next start
</code></pre>

<p>作为爱好用户在 Vercel 上进行部署是完全免费的。首先，我们将<a href="https://vercel.com/">在 Vercel 上创建一个帐户</a>。</p>

<p>登录后，单击<code>+ New Project</code><code>nextjs-fullstack-app-template</code></p>

<p>选择它后，您需要对其进行配置。在该<code>Build and Output Settings</code></p>

<p><img src="https://cdn.jsdelivr.net/gh/zshipu/images/202204071340671.png" alt="下一步配置" /></p>

<p>我们尚未使用任何环境变量，因此无需添加任何环境变量。</p>

<p>一旦这样，只需点击一下，你就完成了！就是这么简单。<code>Deploy</code></p>

<p><img src="https://cdn.jsdelivr.net/gh/zshipu/images/202204071340672.png" alt="成功部署" /></p>

<p><em>（上面的截图有点过时了，我最初在布局部分之前写了部署部分，但你明白了）</em></p>

<p>您的站点不仅现在已部署，而且每次您提交到主分支时，它都会继续自动重新部署。如果您不想要这种行为，那么很容易在 Vercel 仪表板中进行配置。</p>

<p>好消息是，在推送代码之前，您已经配置了<code>yarn build</code></p>

<p>您唯一需要记住的是两个环境之间的差异。如果您的脚本不同（使用 NPM 而不是 yarn，反之亦然），或者如果您缺少环境变量，则更常见的是，您的构建仍然有可能在本地成功但在 Vercel 上失败。</p>

<p>我们将<code>env</code></p>

<h2 id="下一步">下一步</h2>

<p>我希望您找到了本教程，并了解了有关为您和您的团队设置可靠且可扩展的 Next.js 项目的知识。</p>

<p>这是创建生产质量 Next.js 应用程序的多部分系列的第一部分。</p>

<p>下面是我对未来分期付款的一些想法，我鼓励您留下一些反馈，说明您认为哪些最有用（或者如果您在下面看不到它们，也可以留下一些反馈）。</p>

<ul>
<li>如何使用 API 路由和 Tailwind CSS 构建全栈 Next.js 应用程序</li>
<li>如何使用 Recoil 将全局状态管理器添加到 Next.js 应用程序</li>
<li>如何在 Next.s 应用程序中使用 jest 和 剧作家 实现单元和端到端测试</li>
<li>如何使用 Github 操作和 Vercel 创建 CI/CD 管道</li>
<li>如何使用 NextAuth 和 i18next 在 Next.js 应用程序中实现 SSO 身份验证和国际化</li>
<li>如何使用 Prisma 和 Supabase 将数据库连接到 Next.js 应用程序</li>
<li>如何使用 Next.js 和 Nx 在 monorepo 中管理多个应用程序</li>
</ul>

        </div>

        
<div class="post-archive">
    <ul class="post-copyright">
        <li><strong>原文作者：</strong><a rel="author" href="https://geek.zshipu.com/">知识铺</a></li>
        <li style="word-break:break-all"><strong>原文链接：</strong><a href="https://geek.zshipu.com/post/nextjs/%E5%A6%82%E4%BD%95%E4%B8%BA%E6%82%A8%E7%9A%84Next.js%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E5%8F%AF%E6%89%A9%E5%B1%95%E7%9A%84%E6%9E%B6%E6%9E%84/">https://geek.zshipu.com/post/nextjs/%E5%A6%82%E4%BD%95%E4%B8%BA%E6%82%A8%E7%9A%84Next.js%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E5%8F%AF%E6%89%A9%E5%B1%95%E7%9A%84%E6%9E%B6%E6%9E%84/</a></li>
        <li><strong>版权声明：</strong>本作品采用<a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a>进行许可，非商业转载请注明出处（作者，原文链接），商业转载请联系作者获得授权。</li>
        <li><strong>免责声明：</strong>本页面内容均来源于站内编辑发布，部分信息来源互联网，并不意味着本站赞同其观点或者证实其内容的真实性，如涉及版权等问题，请立即联系客服进行更改或删除，保证您的合法权益。转载请注明来源，欢迎对文章中的引用来源进行考证，欢迎指出任何有错误或不够清晰的表达。也可以邮件至 sblig@126.com</li>
    </ul>
</div>
<br/>



        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/post/DDDxx/DDD%E5%AE%9E%E6%88%9820-%E6%80%BB%E7%BB%93%E4%BA%8C%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84%E5%85%B3%E9%94%AE%E8%AE%BE%E8%AE%A110%E9%97%AE/">DDD实战：20 总结（二）：分布式架构关键设计10问</a></li>
        
        <li><a href="/post/DDDxx/DDD%E5%AE%9E%E6%88%9819-%E6%80%BB%E7%BB%93%E4%B8%80%E5%BE%AE%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1%E5%92%8C%E6%8B%86%E5%88%86%E8%A6%81%E5%9D%9A%E6%8C%81%E5%93%AA%E4%BA%9B%E5%8E%9F%E5%88%99/">DDD实战：19 总结（一）：微服务设计和拆分要坚持哪些原则</a></li>
        
        <li><a href="/post/DDDxx/DDD%E5%AE%9E%E6%88%9818-%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%B2%E8%AE%B2%E5%9F%BA%E4%BA%8EDDD%E7%9A%84%E5%BE%AE%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1%E5%AE%9E%E4%BE%8B/">DDD实战：18 知识点串讲：基于DDD的微服务设计实例</a></li>
        
        <li><a href="/post/DDDxx/DDD%E5%AE%9E%E6%88%9817-%E4%BB%8E%E5%90%8E%E7%AB%AF%E5%88%B0%E5%89%8D%E7%AB%AF%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%90%8E%E5%89%8D%E7%AB%AF%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1/">DDD实战：17 从后端到前端：微服务后，前端如何设计</a></li>
        
        <li><a href="/post/DDDxx/DDD%E5%AE%9E%E6%88%9816-%E8%A7%86%E5%9B%BE%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%9C%8D%E5%8A%A1%E5%92%8C%E6%95%B0%E6%8D%AE%E5%9C%A8%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%90%84%E5%B1%82%E7%9A%84%E5%8D%8F%E4%BD%9C/">DDD实战：16 视图：如何实现服务和数据在微服务各层的协作</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='/tags/NextJS'>NextJS</a></li>
                
                <li><a href='/tags/%E8%B5%B7%E6%AD%A5'>起步</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "zshipu/zshipu-geek"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
      </script>
    </div>
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2022 <a href="https://geek.zshipu.com/">知识铺的博客 By 知识铺</a>
        
        | <a rel="nofollow" target="_blank" href="https://beian.miit.gov.cn/">浙 ICP 备19032823号-1</a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://geek.zshipu.com/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://geek.zshipu.com/">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://geek.zshipu.com/post/React-%E5%88%9D%E5%AD%A6%E8%80%85-%E6%95%99%E7%A8%8BReact-%E7%AE%80%E4%BB%8B-%E4%BA%94/" title="React 初学者： 教程：React 简介 五">React 初学者： 教程：React 简介 五</a>
    </li>
    
    <li>
        <a href="https://geek.zshipu.com/post/React-%E5%88%9D%E5%AD%A6%E8%80%85-JSX-%E7%AE%80%E4%BB%8B-%E5%9B%9B/" title="React 初学者： JSX 简介 四">React 初学者： JSX 简介 四</a>
    </li>
    
    <li>
        <a href="https://geek.zshipu.com/post/React-%E5%88%9D%E5%AD%A6%E8%80%85-%E5%AD%A6%E4%B9%A0-ReactJS-%E4%B9%8B%E5%89%8D%E5%BF%85%E9%A1%BB%E4%BA%86%E8%A7%A3%E7%9A%84-5-%E5%A4%A7%E6%8A%80%E8%83%BD-%E4%B8%89/" title="React 初学者： 学习 ReactJS 之前必须了解的 5 大技能 三">React 初学者： 学习 ReactJS 之前必须了解的 5 大技能 三</a>
    </li>
    
    <li>
        <a href="https://geek.zshipu.com/post/React-%E5%88%9D%E5%AD%A6%E8%80%85-%E5%A6%82%E4%BD%95%E5%AD%A6%E4%B9%A0-ReactJS-%E4%BA%8C/" title="React 初学者： 如何学习 ReactJS 二">React 初学者： 如何学习 ReactJS 二</a>
    </li>
    
    <li>
        <a href="https://geek.zshipu.com/post/React-%E5%88%9D%E5%AD%A6%E8%80%85-%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84-React-%E5%BA%94%E7%94%A8-%E4%B8%80/" title="React 初学者： 创建新的 React 应用 一">React 初学者： 创建新的 React 应用 一</a>
    </li>
    
    <li>
        <a href="https://geek.zshipu.com/post/go/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Go%E7%9A%84GC%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/" title="深入理解Go的GC回收机制">深入理解Go的GC回收机制</a>
    </li>
    
    <li>
        <a href="https://geek.zshipu.com/post/nextjs/%E5%A6%82%E4%BD%95%E4%B8%BA%E6%82%A8%E7%9A%84Next.js%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E5%8F%AF%E6%89%A9%E5%B1%95%E7%9A%84%E6%9E%B6%E6%9E%84/" title="起步：如何为您的Next.js项目构建可扩展的架构">起步：如何为您的Next.js项目构建可扩展的架构</a>
    </li>
    
    <li>
        <a href="https://geek.zshipu.com/post/DDDxx/DDD%E5%AE%9E%E6%88%9820-%E6%80%BB%E7%BB%93%E4%BA%8C%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84%E5%85%B3%E9%94%AE%E8%AE%BE%E8%AE%A110%E9%97%AE/" title="DDD实战：20 总结（二）：分布式架构关键设计10问">DDD实战：20 总结（二）：分布式架构关键设计10问</a>
    </li>
    
    <li>
        <a href="https://geek.zshipu.com/post/DDDxx/DDD%E5%AE%9E%E6%88%9819-%E6%80%BB%E7%BB%93%E4%B8%80%E5%BE%AE%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1%E5%92%8C%E6%8B%86%E5%88%86%E8%A6%81%E5%9D%9A%E6%8C%81%E5%93%AA%E4%BA%9B%E5%8E%9F%E5%88%99/" title="DDD实战：19 总结（一）：微服务设计和拆分要坚持哪些原则">DDD实战：19 总结（一）：微服务设计和拆分要坚持哪些原则</a>
    </li>
    
    <li>
        <a href="https://geek.zshipu.com/post/DDDxx/DDD%E5%AE%9E%E6%88%9818-%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%B2%E8%AE%B2%E5%9F%BA%E4%BA%8EDDD%E7%9A%84%E5%BE%AE%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1%E5%AE%9E%E4%BE%8B/" title="DDD实战：18 知识点串讲：基于DDD的微服务设计实例">DDD实战：18 知识点串讲：基于DDD的微服务设计实例</a>
    </li>
    
</ul>
    </section>

    
<section class="widget">
    <h3 class="widget-title" style="color:red">福利派送</h3>
    <ul class="widget-list">
        
        <li>
            <a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?source=5176.11533457&amp;userCode=tzm8r4hc" title="【2019双12】ALL IN CLoud 低至1折" target="_blank" style="color:red">
                
                    <img src="https://img.alicdn.com/tfs/TB1_rYHo7P2gK0jSZPxXXacQpXa-690-388.jpg">
                
            </a>
        </li>
        
        <li>
            <a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?source=5176.11533457&amp;userCode=tzm8r4hc" title="助力产业智慧升级，云服务器首年88元起，更有千元代金券礼包免费领！" target="_blank" style="color:red">
                
                    <img src="https://upload-dianshi-1255598498.file.myqcloud.com/345-7c71532bd4935fbdd9a67c1a71e577b1767b805c.200%E7%89%88%E6%9C%ACB.jpg">
                
            </a>
        </li>
        
        <li>
            <a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?source=5176.11533457&amp;userCode=tzm8r4hc" title="【渠道专享低折扣】11月特惠 限时2折" target="_blank" style="color:red">
                
                    <img src="https://img.alicdn.com/tfs/TB1hblJl7Y2gK0jSZFgXXc5OFXa-750-400.jpg">
                
            </a>
        </li>
        
    </ul>
</section>


    <section class="widget">
        <h3 class="widget-title"><a href='/categories/'>分类</a></h3>
<ul class="widget-list">
    
    <li><a href="https://geek.zshipu.com/categories/flutter/">flutter (30)</a></li>
    
    <li><a href="https://geek.zshipu.com/categories/iOS/">iOS (7)</a></li>
    
    <li><a href="https://geek.zshipu.com/categories/unix/">unix (9)</a></li>
    
    <li><a href="https://geek.zshipu.com/categories/%E7%AE%97%E6%B3%95/">算法 (3)</a></li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href='/tags/'>标签</a></h3>
<div class="tagcloud">
    
    <a href="https://geek.zshipu.com/tags/BI/">BI</a>
    
    <a href="https://geek.zshipu.com/tags/DDD/">DDD</a>
    
    <a href="https://geek.zshipu.com/tags/DDD%E5%AE%9E%E6%88%98/">DDD实战</a>
    
    <a href="https://geek.zshipu.com/tags/DevOps/">DevOps</a>
    
    <a href="https://geek.zshipu.com/tags/JS/">JS</a>
    
    <a href="https://geek.zshipu.com/tags/Java/">Java</a>
    
    <a href="https://geek.zshipu.com/tags/JavaScript/">JavaScript</a>
    
    <a href="https://geek.zshipu.com/tags/Monorepo/">Monorepo</a>
    
    <a href="https://geek.zshipu.com/tags/NextJS/">NextJS</a>
    
    <a href="">Nextjs</a>
    
    <a href="https://geek.zshipu.com/tags/Typora/">Typora</a>
    
    <a href="https://geek.zshipu.com/tags/WebRTC/">WebRTC</a>
    
    <a href="https://geek.zshipu.com/tags/android/">android</a>
    
    <a href="https://geek.zshipu.com/tags/css/">css</a>
    
    <a href="https://geek.zshipu.com/tags/game/">game</a>
    
    <a href="https://geek.zshipu.com/tags/go/">go</a>
    
    <a href="https://geek.zshipu.com/tags/golang/">golang</a>
    
    <a href="">java</a>
    
    <a href="">js</a>
    
    <a href="https://geek.zshipu.com/tags/mysql/">mysql</a>
    
    <a href="https://geek.zshipu.com/tags/nifi/">nifi</a>
    
    <a href="https://geek.zshipu.com/tags/npm/">npm</a>
    
    <a href="https://geek.zshipu.com/tags/python/">python</a>
    
    <a href="https://geek.zshipu.com/tags/reactjs/">reactjs</a>
    
    <a href="https://geek.zshipu.com/tags/sqllit/">sqllit</a>
    
    <a href="https://geek.zshipu.com/tags/vuejs/">vuejs</a>
    
    <a href="https://geek.zshipu.com/tags/web3/">web3</a>
    
    <a href="https://geek.zshipu.com/tags/%E4%B9%A6%E7%B1%8D/">书籍</a>
    
    <a href="https://geek.zshipu.com/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/">人工智能</a>
    
    <a href="https://geek.zshipu.com/tags/%E5%88%86%E8%AF%8D/">分词</a>
    
    <a href="https://geek.zshipu.com/tags/%E6%96%87%E6%91%98/">文摘</a>
    
    <a href="https://geek.zshipu.com/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a>
    
    <a href="https://geek.zshipu.com/tags/%E6%9E%B6%E6%9E%84/">架构</a>
    
    <a href="https://geek.zshipu.com/tags/%E7%88%AC%E8%99%AB/">爬虫</a>
    
    <a href="https://geek.zshipu.com/tags/%E7%BA%BF%E7%A8%8B/">线程</a>
    
    <a href="https://geek.zshipu.com/tags/%E8%B5%B7%E6%AD%A5/">起步</a>
    
</div>
    </section>

    
<section class="widget">
    <h3 class="widget-title">友情链接</h3>
    <ul class="widget-list">
        
        <li>
            <a target="_blank" href="https://blog.zshipu.com//" title="知识铺的博客">知识铺的博客</a>
        </li>
        
    </ul>
</section>


    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://geek.zshipu.com/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>