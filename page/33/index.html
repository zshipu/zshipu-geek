<!doctype html>
<html lang="zh-CN">
<head>
	<meta name="generator" content="Hugo 0.58.3" />

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>知识铺的博客 | 专注于Android、Java、Go语言(golang)、移动互联网、项目管理、软件架构</title>
    <meta property="og:title" content="知识铺的博客 | 专注于Android、Java、Go语言(golang)、移动互联网、项目管理、软件架构">
    <meta property="og:type" content="website">
    <meta name="Keywords" content="golang,go语言,go语言笔记,知识铺,java,android,博客,项目管理,python,软件架构,公众号,小程序">
    <meta name="description" content="知识铺,一个知识分享，积累，整理的地方。">
    <meta property="og:url" content="https://geek.zshipu.com/">
    <link rel="shortcut icon" href='/favicon.ico'  type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <link rel="alternate" type="application/rss+xml+https://geek.zshipu.com/index.xml" href="知识铺的博客" title="%!s(MISSING)" />
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    <script data-ad-client="ca-pub-2874221941555456" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    
    
    
    
    
    
    
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-WLWJSST');</script>
    
</head>


<body>

<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WLWJSST"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <h1>
                        <a id="logo" href="https://geek.zshipu.com/">
                            知识铺的博客
                        </a>
                    </h1>
                
                <p class="description">专注于Android、Java、Go语言(golang)、移动互联网、项目管理、软件架构</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="https://geek.zshipu.com/">首页</a>
                    
                    <a  href="https://geek.zshipu.com/archives/" title="归档">归档</a>
                    
                    <a  href="https://geek.zshipu.com/about/" title="关于">关于</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://geek.zshipu.com/post/news/%E5%BC%80%E6%BA%90%E4%B8%AD%E5%9B%BD-2020%E5%B9%B410%E6%9C%8809%E6%97%A5%E6%8A%80%E6%9C%AF%E8%A6%81%E7%82%B9_20201025191937-2c9ptao.sy/" title="开源中国 2020年10月09日技术要点">开源中国 2020年10月09日技术要点</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年10月9日
        </date>
        
        <div class="post-content">
            QSettings 自定义格式 - OSCHINA 5小时前 转自:http://hi.baidu.com/cyclone/blog/item/1bcb5edfed60d20348540320.html 早就注意到 QSettings 提供了自定义配置文件格式的功能,却一直没怎么看&hellip; PHP 开源工作流引擎 Tpflow V3.2 正式版发布 - OSCHIN&hellip; 1天内 PHP……
        </div>
        <p class="readmore"><a href="https://geek.zshipu.com/post/news/%E5%BC%80%E6%BA%90%E4%B8%AD%E5%9B%BD-2020%E5%B9%B410%E6%9C%8809%E6%97%A5%E6%8A%80%E6%9C%AF%E8%A6%81%E7%82%B9_20201025191937-2c9ptao.sy/">阅读全文</a></p>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://geek.zshipu.com/post/news/%E6%80%9D%E5%90%A6-2020%E5%B9%B410%E6%9C%8809%E6%97%A5%E6%8A%80%E6%9C%AF%E8%A6%81%E7%82%B9/" title="思否 2020年10月09日技术要点">思否 2020年10月09日技术要点</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年10月9日
        </date>
        
        <div class="post-content">
            JavaScript计时器:你需要了解的所有内容_疯狂的技术宅&hellip; 6小时前 作者:Samer Buna翻译:疯狂的技术宅原文:[链接]未经允许严禁转载先从一个面试题开始:JavaScript 面试题:setTimeout 和 setInterval 的源代码是在哪里实现的? (不&hellip; 台达P……
        </div>
        <p class="readmore"><a href="https://geek.zshipu.com/post/news/%E6%80%9D%E5%90%A6-2020%E5%B9%B410%E6%9C%8809%E6%97%A5%E6%8A%80%E6%9C%AF%E8%A6%81%E7%82%B9/">阅读全文</a></p>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://geek.zshipu.com/post/news/%E6%80%9D%E5%90%A6-2020%E5%B9%B410%E6%9C%8809%E6%97%A5%E6%8A%80%E6%9C%AF%E8%A6%81%E7%82%B9_20201025191937-2euokft.sy/" title="思否 2020年10月09日技术要点">思否 2020年10月09日技术要点</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年10月9日
        </date>
        
        <div class="post-content">
            JavaScript计时器:你需要了解的所有内容_疯狂的技术宅&hellip; 6小时前 作者:Samer Buna翻译:疯狂的技术宅原文:[链接]未经允许严禁转载先从一个面试题开始:JavaScript 面试题:setTimeout 和 setInterval 的源代码是在哪里实现的? (不&hellip; 台达P……
        </div>
        <p class="readmore"><a href="https://geek.zshipu.com/post/news/%E6%80%9D%E5%90%A6-2020%E5%B9%B410%E6%9C%8809%E6%97%A5%E6%8A%80%E6%9C%AF%E8%A6%81%E7%82%B9_20201025191937-2euokft.sy/">阅读全文</a></p>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://geek.zshipu.com/post/java/Java-%E7%BA%BF%E7%A8%8B-%E7%83%AD%E7%82%B9%E6%96%87%E7%AB%A0-2020%E5%B9%B410%E6%9C%8809%E6%97%A5/" title="Java 线程 热点文章 2020年10月09日">Java 线程 热点文章 2020年10月09日</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年10月9日
        </date>
        
        <div class="post-content">
            _Java_多_线程__yucan1234的博客-CSDN博客 11小时前 1.在第二种方法(Runnable)中,ticket输出的顺序并不是54321,这是因为_线程_执行的时机难以预测,ticket–并不是原子操作。 2.在第一种方法中,我们new了3个Thread对&helli……
        </div>
        <p class="readmore"><a href="https://geek.zshipu.com/post/java/Java-%E7%BA%BF%E7%A8%8B-%E7%83%AD%E7%82%B9%E6%96%87%E7%AB%A0-2020%E5%B9%B410%E6%9C%8809%E6%97%A5/">阅读全文</a></p>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://geek.zshipu.com/post/css/CSS-%E7%83%AD%E7%82%B9%E6%96%87%E7%AB%A02020%E5%B9%B49%E6%9C%88%E7%AC%AC%E4%B8%89%E5%91%A8/" title="CSS 热点文章：2020年9月第三周">CSS 热点文章：2020年9月第三周</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月20日
        </date>
        
        <div class="post-content">
            前端之_CSS_篇 - NQ31 - 博客园 1天前 /内部样式/ Title p{ background-color: red; } /外部样式 将_css_代码写在单独的文件中,再进行引用/ /行内样式/ hello world&hellip; CSS-01入门和语法,选择器。_qq_44715164的博客-CSDN博客 2天前 _css_简单介绍CSS:Cascading Style Sheets:层叠样式……
        </div>
        <p class="readmore"><a href="https://geek.zshipu.com/post/css/CSS-%E7%83%AD%E7%82%B9%E6%96%87%E7%AB%A02020%E5%B9%B49%E6%9C%88%E7%AC%AC%E4%B8%89%E5%91%A8/">阅读全文</a></p>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://geek.zshipu.com/post/framework/%E4%B8%80%E4%B8%AA%E5%AE%8C%E6%95%B4%E7%9A%84%E5%85%A8%E9%9D%A2k8s%E5%8C%96%E7%9A%84%E9%9B%86%E7%BE%A4%E7%A8%B3%E5%AE%9A%E6%9E%B6%E6%9E%84/" title=""></a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            1年1月1日
        </date>
        
        <div class="post-content">
             我司的集群时刻处于崩溃的边缘，通过近三个月的掌握，发现我司的集群不稳定的原因有以下几点：
1、发版流程不稳定
2、缺少监控平台【最重要的原因】
3、缺少日志系统
4、极度缺少有关操作文档
5、请求路线不明朗
总的来看，问题的主要原因是缺少可预知的监控平台，总是等问题出现了才知道。次要的原因是服务器作用不明朗和发版流程的不稳定。
解决方案 发版流程不稳定 重构发版流程。业务全面k8s化，构建以kubernetes为核心的ci/cd流程。
发版流程 有关发版流程如下：
image.png
浅析：研发人员提交代码到developer分支(时刻确保developer分支处于最新的代码)，developer分支合并到需要发版环境对应的分支，触发企业微信告警，触发部署在k8s集群的gitlab-runner pod，新启runner pod 执行ci/cd操作。在这个过程中需要有三个步骤：测试用例、打包镜像、更新pod。
第一次部署服务在k8s集群环境的时候可能需要：创建namespace、创建imagepullsecret、创建pv(storageclass)、创建deployment（pod controller）、创建svc、创建ingress、等。其中镜像打包推送阿里云仓库和从阿里云仓库下载镜像使用vpc访问，不走公网，无网速限制。流程完毕，runner pod 销毁，gitlab 返回结果。
需要强调的一点是，在这里的资源资源清单不包含configmap或者secret，牵扯到安全性的问题，不应该出
现在代码仓库中，我司是使用rancher充当k8s多集群管理平台，上述安全问题在rancher的dashboard中由运维来做的。
服务部署逻辑图 有关服务部署逻辑图如下：
image.png
根据发版流程的浅析，再根据逻辑图可以明确发版流程。在这里看到我司使用的是kong代替nginx，做认证、鉴权、代理。而slb的ip绑定在kong上。0，1，2属于test job；3属于build job；4，5，6，7属于change pod 阶段。并非所有的服务都需要做存储，需要根据实际情况来定，所以需要在kubernetes.sh里写判断。
在这里我试图使用一套CI应用与所有的环境，所以需要在kubernetes.sh中用到的判断较多，且.gitlab-ci.yml显得过多。建议是使用一个ci模版，应用于所有的环境，毕竟怎么省事怎么来。还要考虑自己的分支模式。
具体参考：
 https://www.cnblogs.com/zisefeizhu/p/13621797.html
 缺少监控预警平台 构建可信赖且符合我司集群环境的联邦监控平台，实现对几个集群环境的同时监控和预故障告警，提前介入。
监控预警逻辑图 有关监控预警逻辑图如下：
image.png
浅析：总的来说，我这里使用到的监控方案是prometheus+shell脚本或go脚本+sentry。使用到的告警方式是企业微信或者企业邮箱。
上图三种颜色的线代表三种监控方式需要注意。脚本主要是用来做备份告警、证书告警、抓贼等。prometheus这里采用的是根据prometheus-opertor修改的prometheus资源清单，数据存储在nas上。
sentry严格的来讲属于日志收集类的平台，在这里我将其归为监控类，是因为我看中了其收集应用底层代码的崩溃信息的能力，属于业务逻辑监控, 旨在对业务系统运行过程中产生的错误日志进行收集归纳和监控告警。
注意这里使用的是联邦监控平台，而部署普通的监控平台。
联邦监控预警平台逻辑图 多集群联邦监控预警平台逻辑图如下：
image.png
因为我司有几个k8s集群，如果在每个集群上都部署一套监控预警平台的话，管理起来太过不便，所以这里我采取的策略是使用将各监控预警平台实行一个联邦的策略，使用统一的可视化界面管理。
这里我将实现三个级别饿监控：操作系统级、应用程序级、业务级。对于流量的监控可以直接针对kong进行监控，模版7424。
缺少日志系统 随着业务全面k8s化进程的推进，对于日志系统的需求将更加渴望，k8s的特性是服务的故障日志难以获取。建立可观测的能过滤的日志系统可以降低对故障的分析难度。
有关日志系统逻辑图如下：
image.png
浅析：在业务全面上k8s化后，方便了管理维护，但对于日志的管理难度就适当上升了。我们知道pod的重启是有多因素且不可控的，而每次pod重启都会重新记录日志，即新pod之前的日志是不可见的。
当然了有多种方法可以实现日志长存：远端存储日志、本机挂载日志等。出于对可视化、可分析等的考虑，选择使用elasticsearch构建日志收集系统。
极度缺少有关操作文档 建立以语雀&ndash;&gt; 运维相关资料为中心的文档中心，将有关操作、问题、脚本等详细记录在案，以备随时查看。
image.png
浅析因安全性原因，不便于过多同事查阅。运维的工作比较特殊，安全化、文档化是必须要保障的。我认为不论是运维还是运维开发，书写文档都是必须要掌握的，为己也好，为他也罢。文档可以简写，但必须要含苞核心的步骤。我还是认为运维的每一步操作都应该记录下来。
请求路线不明朗 根据集群重构的新思路，重新梳理集群级流量请求路线，构建具备：认证、鉴权、代理、连接、保护、控制、观察等一体的流量管理，有效控制故障爆炸范围。
请求路线逻辑图如下：
image.png
浅析：客户访问https://www.cnblogs.com/zisefeizhu 经过kong网关鉴权后进入特定名称空间(通过名称空间区分项目)，因为服务已经拆分为微服务，服务间通信经过istio认证、授权，需要和数据库交互的去找数据库，需要写或者读存储的去找pv，需要转换服务的去找转换服务&hellip;&hellip; 然后返回响应。
总结 综上所述，构建以：以kubernetes为核心的ci/cd发版流程、以prometheus为核心的联邦监控预警平台、以elasticsearch为核心的日志收集系统、以语雀为核心的文档管理中心、以kong及istio为核心的南北东西流量一体化服务，可以在高平发，高可靠性上做到很好保障。
附：总体架构逻辑图
image.png
注：请根据箭头和颜色来分析。
浅析：上图看着似乎过于混乱，静下心来，根据上面的拆分模块一层层分析还是可以看清晰的。这里我用不同颜色的连线代表不同模块的系统，根据箭头走还是蛮清晰的。
根据我司目前的业务流量，上述功能模块，理论上可以实现集群的维稳。私认为此套方案可以确保业务在k8s集群上稳定的运行一段时间，再有问题就属于代码层面的问题了。
这里没有使用到中间件，倒是使用到了缓存redis不过没画出来。我规划在上图搞定后再在日志系统哪里和转换服务哪里增加个中间件kafka或者rq 看情况吧。
END 推荐好文 强大，10k+点赞的 SpringBoot 后台管理系统竟然出了详细教程！ 分享一套基于SpringBoot和Vue的企业级中后台开源项目，代码很规范！能挣钱的，开源 SpringBoot 商城系统，功能超全，超漂亮！  ……
        </div>
        <p class="readmore"><a href="https://geek.zshipu.com/post/framework/%E4%B8%80%E4%B8%AA%E5%AE%8C%E6%95%B4%E7%9A%84%E5%85%A8%E9%9D%A2k8s%E5%8C%96%E7%9A%84%E9%9B%86%E7%BE%A4%E7%A8%B3%E5%AE%9A%E6%9E%B6%E6%9E%84/">阅读全文</a></p>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://geek.zshipu.com/post/java/Java-%E9%9D%A2%E8%AF%95-150%E5%88%B0%E9%9D%A2%E8%AF%95%E9%A2%98%E5%8F%8A%E7%AD%94%E6%A1%88%E8%AE%A9%E4%BD%A0%E7%9B%B4%E6%8E%A5%E6%8B%BF%E5%88%B0offer/" title=""></a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            1年1月1日
        </date>
        
        <div class="post-content">
            title: Java 面试 150到面试题及答案让你直接拿到offer author: 知识铺 date: 2021-10-03 11:33:33 tags: [Java]
1. 什么是Java？ Java 是一种计算机编程语言，具有并发性、基于类和对象导向。对象导向软件开发的优势如下：
 代码的模块化开发，便于维护和修改。 代码的可重复性。 提高了代码的可靠性和灵活性。 加深对代码的理解。  2. OOP 的概念是什么？ 对象导向编程 （OOP） 包括：
 抽象化 封装 多态性 Inheritance 预定义的类型必须是对象 用户定义的类型必须是对象 操作必须通过向对象发送消息来执行  3. 提及Java的某些功能 在 java 的流行中发挥重要作用的一些功能如下：
 对象导向 独立平台 高性能 多线程 便携式 安全  java 中的 Helloworld 示例代码如下所示：
世界好
public class Helloworld{ public static void main(String args[]) { System.out.println(&quot;Hello World&quot;); } }  4. Java 是否 100% 面向对象？ 不是 100%Java 不满足所有 OOP 条件（预定义的类型必须是对象），因为它使用八种原始数据类型（Boolean、字节、字符、int、浮子、双、长、短）这些数据类型不是对象。
5. 什么是抽象？ 抽象是将想法与特定实例分离的过程，因此，根据它们自己的功能而不是实施细节来发展课程。Java 支持创建和存在暴露界面的抽象类，但不包括所有方法的实际实现。抽象技术旨在将一个类的实现细节与其行为分开。
摘要类 人如下。它有一个抽象的方法得到名。
抽象类人
public abstract class Person { public abstract String getName(); }  员工类扩展抽象类人员。方法获取名称返回员工的姓名属性。
员工类
public class Employee extends Person { private String name; public Employee(String name) { this.name = name; } public String getName() { return this.name; } public static void main (String args[]) { Employee employee = new Employee(&quot;John Wilson&quot;); System.out.println(&quot;Employee's Name &quot;+ employee.getName()); Person person = new Employee(&quot;Thomas Smith&quot;); System.……
        </div>
        <p class="readmore"><a href="https://geek.zshipu.com/post/java/Java-%E9%9D%A2%E8%AF%95-150%E5%88%B0%E9%9D%A2%E8%AF%95%E9%A2%98%E5%8F%8A%E7%AD%94%E6%A1%88%E8%AE%A9%E4%BD%A0%E7%9B%B4%E6%8E%A5%E6%8B%BF%E5%88%B0offer/">阅读全文</a></p>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://geek.zshipu.com/post/tlg/output/4-3-5-Chakra-UI/" title=""></a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            1年1月1日
        </date>
        
        <div class="post-content">
            Chakra UI 是一个简单的, 模块化的易于理解的 UI 组件库. 提供了丰富的构建 React 应用所需的 UI 组件. 文档: https://next.chakra-ui.com/docs/getting-started
 Chakra UI 内置 Emotion，是 CSS-IN-JS 解决方案的集大成者 基于 Styled-Systems https://styled-system.com/ 支持开箱即用的主题功能 默认支持白天和黑夜两种模式 拥有大量功能丰富且非常有用的组件 使响应式设计变得轻而易举 文档清晰而全面. 查找 API 更加容易 适用于构建用于展示的给用户的界面 框架正在变得越来越完善
//下载 npm install @chakra-ui/core@1.0.0-next.2   快速使用 克隆默认主题 Chakra-UI 提供的组件是建立在主题基础之上的, 只有先引入了主题组件才能够使用其他组件.
npm install @chakra-ui/theme
引入主题 import {ChakraProvider} from '@chakra-ui/core' import theme from '@chakra-ui/theme' &lt;ChakraProvider theme={theme}&gt; &lt;App/&gt; &lt;/ChakraProvider&gt;  引入 CSS 重置组件 import {CSSReset} from '@chakra-ui/core' &lt;ChakraProvider theme={theme}&gt; &lt;CSSReset /&gt; &lt;App/&gt; &lt;/ChakraProvider&gt;  Style Props 样式属性 Style Props 是用来更改组件样式的, 通过为组件传递属性的方式实现. 通过传递简化的样式属性以达到提升开发效率的目的.
import {Box} from '@chakra-ui/core' &lt;Box w={200} h={200} bg='tomato' p='3px'&gt;Hello&lt;/Box&gt;  主题 颜色模式 (color mode) chakra-ui 提供的组件都支持两种颜色模式, 浅色模式 (light) 和暗色模式(dark). 可以通过 useColorMode 进行颜色模式的更改.
import {userColorMode} from '@chakra-ui/core' const [colorMode, toggleColorMode] = useColorMode() &lt;Text&gt;当前颜色模式为{colorMode}&lt;/Text&gt; &lt;Button onClick={toggleColorMode}&gt;切换颜色模式&lt;/Button&gt;  Chakra 将颜色模式存储在 localStorage 中, 并使用类名策略来确保颜色模式是持久的.
根据颜色模式设置样式 chakra 允许在为元素设置样式时根据颜色模式产生不同值. 通过 useColorModeValue 钩子函数实现.
const bgColor = useColorModeValue(lightModeValue, darkModeValue) &lt;Box bgColor={bgColor}&gt;&lt;/Box&gt;  强制组件颜色模式 使组件不受颜色模式的影响, 始终保持在某个颜色模式下的样式.……
        </div>
        <p class="readmore"><a href="https://geek.zshipu.com/post/tlg/output/4-3-5-Chakra-UI/">阅读全文</a></p>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://geek.zshipu.com/post/tlg/output/Golang-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/" title=""></a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            1年1月1日
        </date>
        
        <div class="post-content">
            本文由 简悦 SimpRead 转码， 原文地址 www.cnblogs.com
1、单元测试概述 1.1 什么是单元&amp;单元测试 单元是应用的最小可测试部件，如函数和对象的方法 单元测试是软件开发中对最小单位进行正确性检验的测试工作 1.2 为什么进行单元测试 保证变更/重
 目录
 1、单元测试概述  1.1 什么是单元 &amp; 单元测试 1.2 为什么进行单元测试 1.3 单元测试用例编写的原则 1.4 单测用例规定  2、golang 常用的单测框架  2.1 testing  2.1.1 单元测试 2.1.2 测试覆盖率 2.1.3 子测试 t.run  2.2 goconvey  2.2.1 基本使用 2.2.2 图形化使用  2.3 testify  2.3.1 简单使用 2.3.2 表驱动测试 2.3.3 mock 功能 2.3.4 单元测试覆盖率应用实例    1、单元测试概述 1.1 什么是单元 &amp; 单元测试  单元是应用的最小可测试部件，如函数和对象的方法 单元测试是软件开发中对最小单位进行正确性检验的测试工作  1.2 为什么进行单元测试  保证变更 / 重构的正确性，特别是在一些频繁变动和多人合作开发的项目中 简化调试过程： 可以轻松的让我们知道哪一部分代码出了问题 单测最好的文档：在单测中直接给出具体接口的使用方法，是最好的实例代码  1.3 单元测试用例编写的原则  单一原则：一个测试用例只负责一个场景 原子性：结果只有两种情况：Pass、Fail 优先要核心组件和逻辑的测试用例 高频使用库，util，重点覆盖  1.4 单测用例规定  文件名必须要xx_test.go命名 测试方法必须是TestXXX开头 方法中的参数必须是t *testing.T 测试文件和被测试文件必须在一个包中  2、golang 常用的单测框架 2.1 testing https://golang.google.cn/pkg/testing/
2.1.1 单元测试 Go提供了test工具用于代码的单元测试，test工具会查找包下以_test.go结尾的文件，调用测试文件中以 Test或Benchmark开头的函数并给出运行结果
测试函数需要导入testing包，并定义以Test开头的函数，参数为testing.T指针类型，在测试函数中调用函数进行返回值测试，当测试失败可通过testing.T结构体的Error函数抛出错误
单元测试是对某个功能的测试
命令行执行
go test 包名 # 测试整个包 go test -v . go test 包名/文件名 # 测试某个文件  简单使用
准备待测代码compute.go
package pkg03 func Add(a, b int) int { return a + b } func Mul(a, b int) int { return a * b } func Div(a, b int) int { return a / b }  准备测试用例compute_test.……
        </div>
        <p class="readmore"><a href="https://geek.zshipu.com/post/tlg/output/Golang-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/">阅读全文</a></p>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://geek.zshipu.com/post/tlg/output/React-%E7%BB%9D%E5%9C%B0%E5%8F%8D%E6%9D%80%E4%B9%8B%E4%B8%87%E5%AD%97%E9%95%BF%E6%96%87%E5%BD%BB%E5%BA%95%E6%90%9E%E6%87%82%E6%B8%B2%E6%9F%93%E6%9B%B4%E6%96%B0%E6%B5%81%E7%A8%8B/" title=""></a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            1年1月1日
        </date>
        
        <div class="post-content">
            React 15 架构分层 React 15 版本 (Fiber 以前) 整个更新渲染流程分为两个部分：
 Reconciler(协调器); 负责找出变化的组件
 Renderer(渲染器); 负责将变化的组件渲染到页面上
  Reconciler 在 React 中可以通过 setState、forceUpdate、ReactDOM.render 来触发更新。每当有更新发生时，Reconciler 会做如下工作：
 调用组件的 render 方法，将返回的 JSX 转化为虚拟 DOM
 将虚拟 DOM 和上次更新时的虚拟 DOM 对比
 通过对比找出本次更新中变化的虚拟 DOM
 通知 Renderer 将变化的虚拟 DOM 渲染到页面上
  Renderer 在对某个更新节点执行玩 Reconciler 之后，会通知 Renderer 根据不同的 &ldquo;宿主环境&rdquo; 进行相应的节点渲染 / 更新。
React 15 的缺陷 React 15 的 diff 过程是 递归执行更新 的。由于是递归，一旦开始就 &ldquo;无法中断&rdquo; 。当层级太深或者 diff 逻辑 (钩子函数里的逻辑) 太复杂，导致递归更新的时间过长，Js 线程一直卡主，那么用户交互和渲染就会产生卡顿。看个例子: count-demo
&lt;button&gt; click &lt;button&gt; &lt;li&gt;1&lt;li&gt; -&gt; &lt;li&gt;2&lt;li&gt; &lt;li&gt;2&lt;li&gt; -&gt; &lt;li&gt;4&lt;li&gt; &lt;li&gt;3&lt;li&gt; -&gt; &lt;li&gt;6&lt;li&gt;  当点击 button 后，列表从左边的 1、2、3 变为右边的 2、4、6。每个节点的更新过程对用户来说基本是同步，但实际上他们是顺序遍历的。具体步骤如下：
 点击 button，触发更新
 Reconciler 检测到需要变更为，则立刻通知 Renderer 更新 DOM。列表变成 2、2、3
 Reconciler 检测到需要变更为，通知 Renderer 更新 DOM。列表变成 2、4、3
 Reconciler 检测到需要变更为，则立刻通知 Renderer 更新 DOM。列表变成 2、4、6
  从此可见 Reconciler 和 Renderer 是交替工作 的，当第一个节点在页面上已经变化后，第二个节点再进入 Reconciler。由于整个过程都是同步的，所以在用户看来所有节点是同时更新的。如果中断更新，则会在页面上看见更新不完全的新的节点树！
假如当进行到第 2 步的时候，突然因为其他任务而中断当前任务，导致第 3、4 步无法进行那么用户就会看到:
&lt;button&gt; click &lt;button&gt; &lt;li&gt;1&lt;li&gt; -&gt; &lt;li&gt;2&lt;li&gt; &lt;li&gt;2&lt;li&gt; -&gt; &lt;li&gt;2&lt;li&gt; &lt;li&gt;3&lt;li&gt; -&gt; &lt;li&gt;3&lt;li&gt;  这种情况是 React 绝对不希望出现的。但是这种应用场景又是十分必须的。想象一下，用户在某个时间点进行了输入事件，此时应该更新 input 内的内容，但是因为一个不在当前可视区域的列表的更新导致用户的输入更新被滞后，那么给用户的体验就是卡顿的。因此 React 团队需要寻找一个办法，来解决这个缺陷。……
        </div>
        <p class="readmore"><a href="https://geek.zshipu.com/post/tlg/output/React-%E7%BB%9D%E5%9C%B0%E5%8F%8D%E6%9D%80%E4%B9%8B%E4%B8%87%E5%AD%97%E9%95%BF%E6%96%87%E5%BD%BB%E5%BA%95%E6%90%9E%E6%87%82%E6%B8%B2%E6%9F%93%E6%9B%B4%E6%96%B0%E6%B5%81%E7%A8%8B/">阅读全文</a></p>
    </article>
    
    



<ol class="page-navigator">
    
    <li class="prev">
        <a href="https://geek.zshipu.com/page/32/">上一页</a>
    </li>
    

    

    
        
        
    
    

    
        
        
        <li >
            <a href="https://geek.zshipu.com/">1</a>
        </li>
        
    
        
        <li>
            <span>...</span>
        </li>
        
    
        
        
        <li >
            <a href="https://geek.zshipu.com/page/31/">31</a>
        </li>
        
    
        
        
        <li >
            <a href="https://geek.zshipu.com/page/32/">32</a>
        </li>
        
    
        
        
        <li  class="current">
            <a href="https://geek.zshipu.com/page/33/">33</a>
        </li>
        
    
        
        
        <li >
            <a href="https://geek.zshipu.com/page/34/">34</a>
        </li>
        
    

    
    

    <li class="next">
        <a href="https://geek.zshipu.com/page/34/">下一页</a>
    </li>
    
</ol>




</div>

                    <footer id="footer">
    <div>
        &copy; 2022 <a href="https://geek.zshipu.com/">知识铺的博客 By 知识铺</a>
        
        | <a rel="nofollow" target="_blank" href="https://beian.miit.gov.cn/">浙 ICP 备19032823号-1</a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>



<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://geek.zshipu.com/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://geek.zshipu.com/">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://geek.zshipu.com/post/React-%E5%88%9D%E5%AD%A6%E8%80%85-%E6%95%99%E7%A8%8BReact-%E7%AE%80%E4%BB%8B-%E4%BA%94/" title="React 初学者： 教程：React 简介 五">React 初学者： 教程：React 简介 五</a>
    </li>
    
    <li>
        <a href="https://geek.zshipu.com/post/React-%E5%88%9D%E5%AD%A6%E8%80%85-JSX-%E7%AE%80%E4%BB%8B-%E5%9B%9B/" title="React 初学者： JSX 简介 四">React 初学者： JSX 简介 四</a>
    </li>
    
    <li>
        <a href="https://geek.zshipu.com/post/React-%E5%88%9D%E5%AD%A6%E8%80%85-%E5%AD%A6%E4%B9%A0-ReactJS-%E4%B9%8B%E5%89%8D%E5%BF%85%E9%A1%BB%E4%BA%86%E8%A7%A3%E7%9A%84-5-%E5%A4%A7%E6%8A%80%E8%83%BD-%E4%B8%89/" title="React 初学者： 学习 ReactJS 之前必须了解的 5 大技能 三">React 初学者： 学习 ReactJS 之前必须了解的 5 大技能 三</a>
    </li>
    
    <li>
        <a href="https://geek.zshipu.com/post/React-%E5%88%9D%E5%AD%A6%E8%80%85-%E5%A6%82%E4%BD%95%E5%AD%A6%E4%B9%A0-ReactJS-%E4%BA%8C/" title="React 初学者： 如何学习 ReactJS 二">React 初学者： 如何学习 ReactJS 二</a>
    </li>
    
    <li>
        <a href="https://geek.zshipu.com/post/React-%E5%88%9D%E5%AD%A6%E8%80%85-%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84-React-%E5%BA%94%E7%94%A8-%E4%B8%80/" title="React 初学者： 创建新的 React 应用 一">React 初学者： 创建新的 React 应用 一</a>
    </li>
    
    <li>
        <a href="https://geek.zshipu.com/post/go/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Go%E7%9A%84GC%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/" title="深入理解Go的GC回收机制">深入理解Go的GC回收机制</a>
    </li>
    
    <li>
        <a href="https://geek.zshipu.com/post/nextjs/%E5%A6%82%E4%BD%95%E4%B8%BA%E6%82%A8%E7%9A%84Next.js%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E5%8F%AF%E6%89%A9%E5%B1%95%E7%9A%84%E6%9E%B6%E6%9E%84/" title="起步：如何为您的Next.js项目构建可扩展的架构">起步：如何为您的Next.js项目构建可扩展的架构</a>
    </li>
    
    <li>
        <a href="https://geek.zshipu.com/post/DDDxx/DDD%E5%AE%9E%E6%88%9820-%E6%80%BB%E7%BB%93%E4%BA%8C%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84%E5%85%B3%E9%94%AE%E8%AE%BE%E8%AE%A110%E9%97%AE/" title="DDD实战：20 总结（二）：分布式架构关键设计10问">DDD实战：20 总结（二）：分布式架构关键设计10问</a>
    </li>
    
    <li>
        <a href="https://geek.zshipu.com/post/DDDxx/DDD%E5%AE%9E%E6%88%9819-%E6%80%BB%E7%BB%93%E4%B8%80%E5%BE%AE%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1%E5%92%8C%E6%8B%86%E5%88%86%E8%A6%81%E5%9D%9A%E6%8C%81%E5%93%AA%E4%BA%9B%E5%8E%9F%E5%88%99/" title="DDD实战：19 总结（一）：微服务设计和拆分要坚持哪些原则">DDD实战：19 总结（一）：微服务设计和拆分要坚持哪些原则</a>
    </li>
    
    <li>
        <a href="https://geek.zshipu.com/post/DDDxx/DDD%E5%AE%9E%E6%88%9818-%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%B2%E8%AE%B2%E5%9F%BA%E4%BA%8EDDD%E7%9A%84%E5%BE%AE%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1%E5%AE%9E%E4%BE%8B/" title="DDD实战：18 知识点串讲：基于DDD的微服务设计实例">DDD实战：18 知识点串讲：基于DDD的微服务设计实例</a>
    </li>
    
</ul>
    </section>

    
<section class="widget">
    <h3 class="widget-title" style="color:red">福利派送</h3>
    <ul class="widget-list">
        
        <li>
            <a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?source=5176.11533457&amp;userCode=tzm8r4hc" title="【2019双12】ALL IN CLoud 低至1折" target="_blank" style="color:red">
                
                    <img src="https://img.alicdn.com/tfs/TB1_rYHo7P2gK0jSZPxXXacQpXa-690-388.jpg">
                
            </a>
        </li>
        
        <li>
            <a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?source=5176.11533457&amp;userCode=tzm8r4hc" title="助力产业智慧升级，云服务器首年88元起，更有千元代金券礼包免费领！" target="_blank" style="color:red">
                
                    <img src="https://upload-dianshi-1255598498.file.myqcloud.com/345-7c71532bd4935fbdd9a67c1a71e577b1767b805c.200%E7%89%88%E6%9C%ACB.jpg">
                
            </a>
        </li>
        
        <li>
            <a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?source=5176.11533457&amp;userCode=tzm8r4hc" title="【渠道专享低折扣】11月特惠 限时2折" target="_blank" style="color:red">
                
                    <img src="https://img.alicdn.com/tfs/TB1hblJl7Y2gK0jSZFgXXc5OFXa-750-400.jpg">
                
            </a>
        </li>
        
    </ul>
</section>


    <section class="widget">
        <h3 class="widget-title"><a href='/categories/'>分类</a></h3>
<ul class="widget-list">
    
    <li><a href="https://geek.zshipu.com/categories/flutter/">flutter (30)</a></li>
    
    <li><a href="https://geek.zshipu.com/categories/iOS/">iOS (7)</a></li>
    
    <li><a href="https://geek.zshipu.com/categories/unix/">unix (9)</a></li>
    
    <li><a href="https://geek.zshipu.com/categories/%E7%AE%97%E6%B3%95/">算法 (3)</a></li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href='/tags/'>标签</a></h3>
<div class="tagcloud">
    
    <a href="https://geek.zshipu.com/tags/BI/">BI</a>
    
    <a href="https://geek.zshipu.com/tags/DDD/">DDD</a>
    
    <a href="https://geek.zshipu.com/tags/DDD%E5%AE%9E%E6%88%98/">DDD实战</a>
    
    <a href="https://geek.zshipu.com/tags/DevOps/">DevOps</a>
    
    <a href="https://geek.zshipu.com/tags/JS/">JS</a>
    
    <a href="https://geek.zshipu.com/tags/Java/">Java</a>
    
    <a href="https://geek.zshipu.com/tags/JavaScript/">JavaScript</a>
    
    <a href="https://geek.zshipu.com/tags/Monorepo/">Monorepo</a>
    
    <a href="https://geek.zshipu.com/tags/NextJS/">NextJS</a>
    
    <a href="">Nextjs</a>
    
    <a href="https://geek.zshipu.com/tags/Typora/">Typora</a>
    
    <a href="https://geek.zshipu.com/tags/WebRTC/">WebRTC</a>
    
    <a href="https://geek.zshipu.com/tags/android/">android</a>
    
    <a href="https://geek.zshipu.com/tags/css/">css</a>
    
    <a href="https://geek.zshipu.com/tags/game/">game</a>
    
    <a href="https://geek.zshipu.com/tags/go/">go</a>
    
    <a href="https://geek.zshipu.com/tags/golang/">golang</a>
    
    <a href="">java</a>
    
    <a href="">js</a>
    
    <a href="https://geek.zshipu.com/tags/mysql/">mysql</a>
    
    <a href="https://geek.zshipu.com/tags/nifi/">nifi</a>
    
    <a href="https://geek.zshipu.com/tags/npm/">npm</a>
    
    <a href="https://geek.zshipu.com/tags/python/">python</a>
    
    <a href="https://geek.zshipu.com/tags/reactjs/">reactjs</a>
    
    <a href="https://geek.zshipu.com/tags/sqllit/">sqllit</a>
    
    <a href="https://geek.zshipu.com/tags/vuejs/">vuejs</a>
    
    <a href="https://geek.zshipu.com/tags/web3/">web3</a>
    
    <a href="https://geek.zshipu.com/tags/%E4%B9%A6%E7%B1%8D/">书籍</a>
    
    <a href="https://geek.zshipu.com/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/">人工智能</a>
    
    <a href="https://geek.zshipu.com/tags/%E5%88%86%E8%AF%8D/">分词</a>
    
    <a href="https://geek.zshipu.com/tags/%E6%96%87%E6%91%98/">文摘</a>
    
    <a href="https://geek.zshipu.com/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a>
    
    <a href="https://geek.zshipu.com/tags/%E6%9E%B6%E6%9E%84/">架构</a>
    
    <a href="https://geek.zshipu.com/tags/%E7%88%AC%E8%99%AB/">爬虫</a>
    
    <a href="https://geek.zshipu.com/tags/%E7%BA%BF%E7%A8%8B/">线程</a>
    
    <a href="https://geek.zshipu.com/tags/%E8%B5%B7%E6%AD%A5/">起步</a>
    
</div>
    </section>

    
<section class="widget">
    <h3 class="widget-title">友情链接</h3>
    <ul class="widget-list">
        
        <li>
            <a target="_blank" href="https://blog.zshipu.com//" title="知识铺的博客">知识铺的博客</a>
        </li>
        
    </ul>
</section>


    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://geek.zshipu.com/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>